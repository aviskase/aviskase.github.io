{{ $title := default "" .title }}
{{ $isVisible := default true .isVisible -}}

{{ if eq $title "" }}
  {{ errorf "The MakeTitle partial requires a title parameter." }}
{{ else }}
  {{ if $isVisible}}
    {{ $title = $title | markdownify }}
  {{ else }}
    {{ $title = $title | markdownify | plainify | safeHTML | htmlUnescape }}
  {{ end }}
{{ end }}
{{ return $title }}
