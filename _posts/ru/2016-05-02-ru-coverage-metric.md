---
title: Оценка тестового покрытия
ref: 160502
lang: ru
---

На одном проекте, где я работаю, для задач ведётся две замечательные метрики: сколько процентов протестировано и сколько процентов работает. Каждый раз, когда надо обновить сии две циферки, у меня немного взрывается мозг. Ибо не нравятся.

## Что значит сколько протестировано?
Традиционно у нас пишут процент пройденных проверок в чек-листе от общего числа проверок. Меня эта традиция не устраивает, потому что проверка проверке рознь. В одной хватит посмотреть верен ли текст ошибки, а в другой --- что ошибка вообще срабатывает.

Рисуется такое решение. Для каждой проверки ставится относительное число по типу story point. Красоты ради обзовём его test point (хи-хи). Для проверки текста ошибки хватит 1 tp, а для воспроизведение ошибки --- 3 tp. В таком случае, всего чек-лист стоит 4 tp. Во время прогона чек-листа для каждой проверки проставляется сколько проверено. Например, текст весь посмотрели, ставим полное число 1 tp. А вот воспроизвели только для части сценариев, поставим 2 из 3 tp. Итого, мы прошли 3 из 4 tp чек-листа.

## А что значит сколько работает?
Исходя из того, как пишут другие тестировщики проекта, то за это число берут количество "зелёных" (то бишь passed) проверок от общего числа проверок.

Возьмем такую ситуацию: протестировать импорт чего-либо. Начинаем тестирование, и вуаля, кнопки "Импортировать" вообще нет на странице. То есть у нас блокер, ни одна проверка дальше не пойдёт. Что писать для "сколько работает"? Ноль. Разработчик залил фикс, кнопочка появилась. Проверки полетели, фича работает на ура --- ставим 100% (чудо).

Вопрос --- верно ли то, что мы поставили ноль на первом прогоне? Ведь не было только кнопочки, все остальное на самом деле работало. Думаю, что верно. Но тогда эту метрику обязательно нужно переименовать, ведь она меряет не сколько *работает,* а сколько функционости *доступно* пользователю и в каком объёме.

## И что в итоге?
Вот меряем мы в test point-ах чек-листы, переименовали метрику доступности. А теперь финт ушами. Убираем проценты. Ведь и чек-листы чек-листу рознь. Зачем все эти проценты нужны, если по ним не понятно, какой реально прогресс по задачам. 20% маленькой задачи в 10 tp --- не страшно, 80% задачи в 1000 tp --- может быть и провал релиза. Да и строго говоря, указанный метод вычисления использует явно не абсолютную, а скорее интервальную шкалу. В ней [нельзя делить и умножать](https://ru.wikipedia.org/wiki/Шкала), а значит и вычислять проценты.

## Гуру молвят
О выборе шкал и правильного их использования часто пишет Michael Bolton. Относительно недавно была [очередная статья на эту тему](http://www.developsense.com/blog/2016/04/is-there-a-simple-coverage-metric/)[[en]]. Его мнение такого, что в тестировании даже интервальная шкала --- сильно круто, правильней использовать номинальные и ранговые. Мне очень понравился пример из статьи, поэтому вот *крайне вольный* перевод:

* :white_circle: Уровень 0: вообще ничего не знаем об этой фиче.
* :no_mouth: Уровень 1: немного потыкались в фичу. Прошли смоук, но не сказать, что очень много понимаем и знаем; не шли в глубину.
* :neutral_face: Уровень 2: достаточно хорошо потыкались, хотя не до самой глубины. Прошли основные, ключевые, критические сценарии, то как обрабатываются обычные ошибки. Провели тестирование, которое выявит важные дефекты, если они есть.
* :sunglasses: Уровень 3: излазили фичу вдоль и поперёк. Проверили необычные и сложные условия или состояния. Искали хитрые и трудноуловимые проблемы. Испробовали экстремальные и невероятные сценарии. Если и были какие-то серьёзные дефекты, очень вероятно что мы их нашли.
