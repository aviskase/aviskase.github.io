<!DOCTYPE html>
<html lang="en" prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#">

    <head>

        <title>API Testing in Python: requests vs bravado | aviskase</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta charset="utf-8" />


    <link rel="canonical" href="https://www.aviskase.com/articles/2020/02/07/api-testing-in-python-requests-vs-bravado/"/>

    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:site" content="@aviskase" />

    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://www.aviskase.com/articles/2020/02/07/api-testing-in-python-requests-vs-bravado/" />
    <meta property="og:title" content="API Testing in Python: requests vs bravado" />
    <meta property="og:description" content="Note This article is written as a result of collaboration with TestProject. While many of you know me as a GUI-driven tools hater, that’s just my preference, so if something works for you and your company, that’s the only thing that matters. There are no best practices …" />
    <meta property="og:image" content="https://www.aviskase.com/images/og_requests-vs-bravado.png" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:width" content="1200" />
    <meta property="article:author" content="https://www.aviskase.com/pages/about/" />
    <meta property="article:published_time" content="2020-02-07 23:40:44.958491-05:00" />


    <meta name="category" content="Testing" />
    <meta property="article:section" content="Testing" />

    <meta name="keywords" content="api, practical, tools" />
    <meta property="article:tag" content="api" />
    <meta property="article:tag" content="practical" />
    <meta property="article:tag" content="tools" />



<meta name="description" content="Note This article is written as a result of collaboration with TestProject. While many of you know me as a GUI-driven tools hater, that’s just my preference, so if something works for you and your company, that’s the only thing that matters. There are no best practices …"/>

        <link href="https://www.aviskase.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="aviskase Full Atom Feed" />

        <link rel="icon" href="https://www.aviskase.com/theme/favicon.ico">
        <link rel="stylesheet" href="//code.cdn.mozilla.net/fonts/fira.css">
        <link rel="stylesheet" type="text/css" href="https://www.aviskase.com/theme/css/fontello.css" />
        <link rel="stylesheet" type="text/css" href="https://www.aviskase.com/theme/style.css" />
        <link rel="stylesheet" type="text/css" href="https://www.aviskase.com/theme/solarized-light.css" />

<script type="text/javascript">
    var disqus_identifier = "articles/2020/02/07/api-testing-in-python-requests-vs-bravado/";
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://aviskase.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script>
  <script>
  if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
    window.addEventListener("load", function(){
      function enableCookies() {
          window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({
              'pageType': 'article',
              'articleCategory': 'Testing',
              'articleTags': ["api", "practical", "tools"]
            });

          (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-W75RR8K');
      }

      function handleStatus(status) {
        if ('allow' === status) {
          enableCookies();
        }
      }
      window.cookieconsent.hasTransition = false;

      window.cookieconsent.initialise({
        palette: {
          popup: {background: "#000000"},
          button: {background: 'transparent', border: "#d47500"},
          highlight: {background: 'transparent', border: '#008000'}
        },
        type: "opt-in",
        content: {
          message: "This site uses cookies for analytics.",
          href: 'https://www.aviskase.com/pages/privacy-and-cookies',
        },
        onInitialise: handleStatus,
        onStatusChange: handleStatus
      })
    });
  }
  </script>    </head>

<body id="index" class="home">
    <nav>
        <ul>
          <li><a class="site-title" href="https://www.aviskase.com/">aviskase</a></li>
          <li><a class="site-title" href="https://www.aviskase.com/">Blog</a></li>

          <li><a href="https://www.aviskase.com/pages/about">About</a></li>
          <li><a href="https://www.aviskase.com/meta">Meta</a></li>
          <li><a href="https://www.aviskase.com/feeds/all.atom.xml">RSS</a></li>

        </ul>

    </nav>

    <main>
<article>

    <h1><span class="caps">API</span> Testing in Python: requests vs&nbsp;bravado</h1>

    <div class='article-meta'>

        <time class="published">7 Feb 2020</time>


        <span class="readtime">
            <span class='icon-clock' aria-hidden="true"></span>
            10&nbsp;mins
        </span>

        <span class="article-category">
            <span class="icon-folder-open" aria-hidden="true"></span>
            <a href="https://www.aviskase.com/category/testing/">Testing</a>
        </span>

        <span class="article-tags">
            <span class='icon-tags' aria-hidden="true"></span>
                <a href="https://www.aviskase.com/tag/api/">api</a>,                 <a href="https://www.aviskase.com/tag/practical/">practical</a>,                 <a href="https://www.aviskase.com/tag/tools/">tools</a>        </span>


        <span class="article-comments">
            <span class='icon-chat-empty' aria-hidden="true"></span>
            <a href="https://www.aviskase.com/articles/2020/02/07/api-testing-in-python-requests-vs-bravado/#disqus_thread" data-disqus-identifier="">0 comments</a>
        </span>

    </div>


    <div class="admonition note">
<p class="admonition-title">Note</p>
<p>This article is written as a result of collaboration with <a class="external" href="https://testproject.io/">TestProject</a>. 
While many of you know me as <a class="internal" href="https://www.aviskase.com/articles/2019/11/25/why-i-dont-use-postman/">a <span class="caps">GUI</span>-driven tools hater</a>, 
that&rsquo;s just my preference, so if something works for you and your company, that&rsquo;s the only thing 
that matters. There are no best practices and there are no best tools for&nbsp;everyone. </p>
<p>What I really admire the TestProject team for is their strategy of creating a knowledge-sharing community.
And their product has a totally free usage tier. You don&rsquo;t see such combo&nbsp;often.</p>
</div>
<p><span class="caps">API</span> testing is not an uncommon topic and you can find a gazillion of articles about it. If you check tutorials in 
Java or JavaScript, you’ll notice that they use a plethora of diverse libraries. Yet for Python 
<a class="external" href="https://www.dowen.me.uk/Automated-rest-api-testing-with-python/">tutorials</a> are usually based on general-purpose 
<a class="external" href="https://requests.kennethreitz.org">requests</a> library. In this article, I would like to suggest a different&nbsp;approach. </p>
<p>Warning: all code examples are written and checked in Python 3.7.
<a class="external" href="https://github.com/aviskase/testproject-api-example">You can find the source code here</a>.</p>
<p>TestProject has an <span class="caps">API</span> based <a class="external" href="https://api.testproject.io/docs/v2/">on OpenAPI 2.0 specification</a>. 
I’ll use it as an example. If you want to try yourself, don’t forget to create an <span class="caps">API</span>&nbsp;key!</p>
<p>Let’s start with the plain old <em>requests</em> first. But before diving into coding, I suggest <strong>thinking</strong> about what your 
framework should be capable of. Don’t spend too much time on the design though, premature overengineering is&nbsp;harmful.</p>
<p>TestProject <span class="caps">API</span> is structured around different resources and methods. For example, to get information about a specific 
project you should use <code>projects/{identifier}</code> endpoint with method <span class="caps">GET</span>. You’ll probably soon get tired writing 
<code>request.get(&lt;params&gt;)</code> all the time, so let’s create a custom function (or&nbsp;method).</p>
<p>The next commonly used piece is authorization. All calls to <span class="caps">API</span> require <code>Authorization</code> header with your <span class="caps">API</span> key. 
But sometimes you want to pass additional headers, so your framework should support that as&nbsp;well.</p>
<p>This is an example class I&nbsp;wrote:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>


<span class="k">class</span> <span class="nc">APITestProject</span><span class="p">:</span>
    <span class="n">endpoint</span> <span class="o">=</span> <span class="s1">&#39;https://api.testproject.io/v2&#39;</span>
    <span class="n">auth_headers</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># Sometimes we don&#39;t want to authorize requests</span>
        <span class="k">if</span> <span class="n">api_key</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">auth_headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Authorization&#39;</span><span class="p">:</span> <span class="n">api_key</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">_construct_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">headers</span><span class="p">):</span>
        <span class="c1"># Allows to combine authorization header with per-request custom headers</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">auth_headers</span><span class="p">,</span> <span class="o">**</span><span class="n">headers</span><span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">auth_headers</span>

    <span class="k">def</span> <span class="nf">get_specific_project</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">identifier</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{self.endpoint}</span><span class="s1">/projects/</span><span class="si">{identifier}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_construct_headers</span><span class="p">(</span><span class="n">headers</span><span class="p">))</span>
</code></pre></div>

<p>Now it’s time to write simple tests. I use <em>pytest</em> as a test runner because of its versatility and&nbsp;pluggability.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>

<span class="kn">from</span> <span class="nn">requests_client.api_testproject</span> <span class="kn">import</span> <span class="n">APITestProject</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s1">&#39;module&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">api</span><span class="p">(</span><span class="n">api_key</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">APITestProject</span><span class="p">(</span><span class="n">api_key</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_get_specific_project</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">existing_project</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_specific_project</span><span class="p">(</span><span class="n">existing_project</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span>


<span class="k">def</span> <span class="nf">test_get_nonexisting_project</span><span class="p">(</span><span class="n">api</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_specific_project</span><span class="p">(</span><span class="s1">&#39;iZyZmrbAAkuHyqdB3O6fHd&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">404</span>


<span class="k">def</span> <span class="nf">test_get_specific_project_accept_html</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">existing_project</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">get_specific_project</span><span class="p">(</span><span class="n">existing_project</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;text/html&#39;</span><span class="p">})</span>
    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">406</span>
</code></pre></div>

<p>If you are not familiar with pytest fixtures, you can read about them in 
<a class="external" href="https://docs.pytest.org/en/latest/fixture.html">the official documentation</a>. In short, here I have three&nbsp;fixtures: </p>
<ul>
<li><code>api_key</code> — defined in <code>conftest.py</code> and returns a string with my <span class="caps">API</span>&nbsp;key</li>
<li><code>existing_project</code> — defined in <code>conftest.py</code> and returns a string with id of one of my&nbsp;project</li>
<li><code>api</code> — constructs a default client for <span class="caps">API</span> using an <span class="caps">API</span>&nbsp;key</li>
</ul>
<p>Tests are pretty&nbsp;straightforward:</p>
<ul>
<li>Retrieve information about the existing&nbsp;project.</li>
<li>Attempt to get information using non-existing project&nbsp;id.</li>
<li>Attempt to retrieve information about the existing project while asking to send information in the <span class="caps">HTML</span>&nbsp;format.</li>
</ul>
<p>They assert only responses’ status codes (not the best tests ever). But take a look at the last test. At the time 
of writing the only officially supported response content types were: <code>application/json</code>, <code>text/json</code>, <code>text/plain</code>, and
<code>application/json-patch+json</code>. Though, if you take a careful look at the description doc, you’ll notice that 
<code>application/xml</code> is supported too. Anyway, with <code>Accept: text/html</code> you’d expect server to respond with 
<code>406 Not Acceptable</code>. Yet, that’s not the case: the current version responds with 200 code and plain text json body. 
It&rsquo;s not a serious issue, but it&rsquo;s worth exploring because it means that there are places where server capabilities 
don&rsquo;t match the published description doc. I suspect it&rsquo;s a sign of a design-first approach (which I like!), but it can 
be hard to&nbsp;manage.</p>
<p>As you noticed, for creating <span class="caps">API</span> tests using requests library we need to write a lot of boilerplate&nbsp;code:</p>
<ul>
<li>Wrappers for headers and query string&nbsp;managements.</li>
<li>Methods/functions written in business terms rather than <span class="caps">GET</span>/<span class="caps">POST</span>/etc&nbsp;way.</li>
<li>Constructing endpoints path (concatenating the main <span class="caps">URL</span> with paths, ids, and query&nbsp;parameters).</li>
</ul>
<p>Basically, you create a whole <span class="caps">API</span> client. And we haven’t even touched data models. Oh, if only this could be 
simplified and automated, right? And it can! Welcome to the brave <em>old</em> world of client generation based on <span class="caps">API</span> 
description docs. TestProject doesn&rsquo;t just provide endpoints but also has a description doc to describe their <span class="caps">API</span>. 
Currently, it’s based on Open <span class="caps">API</span> 2.0, or, as many people still call it, Swagger. This description doc is used to 
generate a documentation <span class="caps">UI</span> with &ldquo;Try out&rdquo; capabilities, and it also can be used for client generation. Personally, I 
ended up using <a class="external" href="https://github.com/Yelp/bravado">bravado</a> library for this&nbsp;task.</p>
<p>Here is how our small class will look with&nbsp;bravado:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">pathlib</span> <span class="kn">import</span> <span class="n">Path</span>

<span class="kn">from</span> <span class="nn">bravado.client</span> <span class="kn">import</span> <span class="n">SwaggerClient</span>
<span class="kn">from</span> <span class="nn">bravado.requests_client</span> <span class="kn">import</span> <span class="n">RequestsClient</span>


<span class="k">class</span> <span class="nc">APITestProject</span><span class="p">:</span>
    <span class="n">host</span> <span class="o">=</span> <span class="s1">&#39;api.testproject.io&#39;</span>
    <span class="n">swagger_spec</span> <span class="o">=</span> <span class="s1">&#39;https://api.testproject.io/docs/v2/swagger.json&#39;</span>
    <span class="n">swagger_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s1">&#39;swagger.json&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">http_client</span> <span class="o">=</span> <span class="n">RequestsClient</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">api_key</span><span class="p">:</span>
            <span class="n">http_client</span><span class="o">.</span><span class="n">set_api_key</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">param_name</span><span class="o">=</span><span class="s1">&#39;Authorization&#39;</span><span class="p">,</span> <span class="n">param_in</span><span class="o">=</span><span class="s1">&#39;header&#39;</span><span class="p">)</span>
        <span class="c1"># Usually I&#39;ll use `from_url` generation, but current version of specification is not valid OpenAPI 2.0</span>
        <span class="c1"># self.client = SwaggerClient.from_url(self.swagger_spec, http_client=http_client)</span>
        <span class="n">swagger_spec</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">swagger_file</span><span class="o">.</span><span class="n">open</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">client</span> <span class="o">=</span> <span class="n">SwaggerClient</span><span class="o">.</span><span class="n">from_spec</span><span class="p">(</span><span class="n">swagger_spec</span><span class="p">,</span> <span class="n">http_client</span><span class="o">=</span><span class="n">http_client</span><span class="p">)</span>
</code></pre></div>

<p>There are two ways to generate a client with bravado: pointing either to <span class="caps">URL</span> where description doc is hosted or to 
the local file. The example uses local file because bravado doesn&rsquo;t just simply generate client, but also can 
perform validation, and unfortunately at the time of writing TestProject <span class="caps">API</span> description doc contains some invalid 
attributes. But that’s a great thing! Even though developers should be using linters to check for such problems, it 
is still a good idea to recheck during integration tests. Another nice feature is that bravado performs requests and 
response validation, which can help find dynamic problems. For example, if the description doc says that the field in 
the response should be an integer, yet you received a string, you’ll get an exception even if there were no explicit 
assertions for that field in the test. Of course, you can disable all validations, though, I wouldn&rsquo;t recommend&nbsp;that.</p>
<p>So, let’s go back to the tests and see how they look with bravado based&nbsp;client:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">from</span> <span class="nn">bravado.exception</span> <span class="kn">import</span> <span class="n">HTTPNotFound</span><span class="p">,</span> <span class="n">HTTPNotAcceptable</span>

<span class="kn">from</span> <span class="nn">bravado_client.api_testproject</span> <span class="kn">import</span> <span class="n">APITestProject</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span><span class="p">(</span><span class="n">scope</span><span class="o">=</span><span class="s1">&#39;module&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">api</span><span class="p">(</span><span class="n">api_key</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">APITestProject</span><span class="p">(</span><span class="n">api_key</span><span class="p">)</span><span class="o">.</span><span class="n">client</span>


<span class="k">def</span> <span class="nf">test_get_specific_project</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">existing_project</span><span class="p">):</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">Projects</span><span class="o">.</span><span class="n">Projects_GetProject</span><span class="p">(</span><span class="n">projectId</span><span class="o">=</span><span class="n">existing_project</span><span class="p">)</span><span class="o">.</span><span class="n">response</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span>


<span class="k">def</span> <span class="nf">test_get_nonexisting_project</span><span class="p">(</span><span class="n">api</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="n">HTTPNotFound</span><span class="p">):</span>
        <span class="n">api</span><span class="o">.</span><span class="n">Projects</span><span class="o">.</span><span class="n">Projects_GetProject</span><span class="p">(</span><span class="n">projectId</span><span class="o">=</span><span class="s1">&#39;iZyZmrbAAkuHyqdB3O6fHd&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">response</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">test_get_specific_project_accept_html</span><span class="p">(</span><span class="n">api</span><span class="p">,</span> <span class="n">existing_project</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="n">HTTPNotAcceptable</span><span class="p">):</span>
        <span class="n">api</span><span class="o">.</span><span class="n">Projects</span><span class="o">.</span><span class="n">Projects_GetProject</span><span class="p">(</span>
            <span class="n">projectId</span><span class="o">=</span><span class="n">existing_project</span><span class="p">,</span>
            <span class="n">_request_options</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;headers&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;text/html&#39;</span><span class="p">}}</span>
        <span class="p">)</span><span class="o">.</span><span class="n">response</span><span class="p">()</span>
</code></pre></div>

<p>Did you notice magic there? I don’t need to write code with GETs anymore. Bravado generates resources and methods 
for them automagically. Usually, they are based on tag and <code>operationId</code>, so for getting a specific project: 
<code>tag=Projects</code> and <code>operationId=Projects_GetProject</code>. Another difference is that bravado throws an exception if the 
response code is not 2xx. In my view, <code>HTTPNotAcceptable</code> is more readable than a number&nbsp;406.</p>
<p>Now it’s time to check how using client generation library helps to improve on a barebone approach with&nbsp;requests:</p>
<ul>
<li>No need for custom headers and query string management, it’s already written by library developers. 
With bravado you can have default headers for each request as well as per request custom&nbsp;headers.</li>
<li>Methods/functions are generated and sound more domain-specific (though, it depends on how accurate was 
naming of&nbsp;operationIds).</li>
<li>The only endpoint you should worry about is where the description doc is hosted, or, if using the local file, 
the <code>host</code> attribute.</li>
</ul>
<p>Don’t forget, all magic comes with a price. Client generators are not perfect for&nbsp;everyone:</p>
<ul>
<li>Autogeneration is useless for constantly changing APIs. Though, it’s considered a bad practice, 
because real customers also use client generators and each breaking change is a pain for&nbsp;them.</li>
<li>Sometimes you want to make invalid requests. In some cases, you can simply turn off request validation, 
but usually making real fuzzy tests is easier with general-purpose <span class="caps">HTTP</span>&nbsp;libraries.</li>
<li>Not your code. There could be bugs. Be careful when selecting a library, it’s better to be open source with 
fresh contributions. Also, pay attention to supported specifications: bravado does not support OpenAPI 3.0&nbsp;=(</li>
</ul>
<p>The world of <span class="caps">API</span> related tools and libraries is enormous. Some people prefer <span class="caps">GUI</span>-driven tools like Postman or 
TestProject, others prefer to code. Next time you’ll be writing automation, don’t feel restricted to common generic 
libraries and consider different&nbsp;alternatives. </p>



    <div class="page-navigation code">
        <a class="prev" href="https://www.aviskase.com/articles/2020/02/01/hmms-january/" title="Hmms: January">&larr; older</a>


    </div>

<div id="disqus_thread"></div>
</article>
    </main>

    <footer>
        <a href="mailto:aviskase@gmail.com">Yuliya Bagriy</a><span> &middot; 2020 &middot; </span><a href="https://www.aviskase.com/pages/privacy-and-cookies">Privacy</a>
    </footer>

    <script id="dsq-count-scr" src="//aviskase.disqus.com/count.js" async></script>

</body>
</html>