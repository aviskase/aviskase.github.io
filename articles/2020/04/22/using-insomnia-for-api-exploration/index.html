<!doctype html><html lang=en prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#"><head><base href=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/><title>Using Insomnia for API exploration | aviskase</title>
<meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta property="og:title" content="Using Insomnia for API exploration"><meta name=twitter:title content="Using Insomnia for API exploration"><meta property="og:description" content="One of the tools I use almost daily is Insomnia.
It&rsquo;s a great alternative to the P-everyone-knows-that-one.
Insomnia is easy to use on Linux, has plugins, and UI is clean and simple.
Let me show you some basic features. We will use OpenWeatherMap API.

  Workspaces

Workspaces are collections of thematically combined requests. Some of my workspaces are service-specific,
while others contain everything related to the particular client use case or event (i.e., cross-service)."><meta property="twitter:description" content="One of the tools I use almost daily is Insomnia.
It&rsquo;s a great alternative to the P-everyone-knows-that-one.
Insomnia is easy to use on Linux, has plugins, and UI is clean and simple.
Let me show you some basic features. We will use OpenWeatherMap API.

  Workspaces

Workspaces are collections of thematically combined requests. Some of my workspaces are service-specific,
while others contain everything related to the particular client use case or event (i.e., cross-service)."><meta name=description content="One of the tools I use almost daily is Insomnia.
It&rsquo;s a great alternative to the P-everyone-knows-that-one.
Insomnia is easy to use on Linux, has plugins, and UI is clean and simple.
Let me show you some basic features. We will use OpenWeatherMap API.

  Workspaces

Workspaces are collections of thematically combined requests. Some of my workspaces are service-specific,
while others contain everything related to the particular client use case or event (i.e., cross-service)."><meta property="og:url" content="https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/"><link rel=canonical href=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/><meta property="og:type" content="article"><meta property="article:published_time" content="2020-04-22T01:06:01+00:00"><meta property="article:modified_time" content="2020-04-22T01:06:01+00:00"><meta property="og:site_name" content="aviskase"><meta property="article:author" content="https://www.aviskase.com/pages/about/"><meta name=twitter:card content="summary"><meta name=twitter:creator content="@aviskase"><link rel=me href=https://infosec.exchange/@aviskase><meta name=fediverse:creator content="@aviskase@infosec.exchange"><meta name=generator content="Hugo 0.143.1"><link rel=stylesheet href=/css/main.min.dc308387b59c2981425796fc4e3c4b8fa652f925a58f25d2fde59dc54e007e78.css integrity="sha256-3DCDh7WcKYFCV5b8TjxLj6ZS+SWljyXS/eWdxU4Afng="><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest></head><body><header><a href=/ class=title>aviskase</a><p><a href=/>Home</a>
<a href=/pages/about/>About</a>
<a href=/pages/archive/>Archive</a>
<a href=/feeds/all.atom.xml>RSS</a></p></header><main><div class=title><h1>Using Insomnia for API exploration</h1></div><table class=article-props><tr><th class=width-min>published</th><td class=width-auto>2020-04-22</td></tr><tr><th class=width-min>reading&nbsp;time</th><td class=width-auto>3&nbsp;mins</td></tr><tr><th class=width-min>categories</th><td class=width-auto><a href=/categories/it/>it</a></td></tr></table><article><p>One of the tools I use almost daily is <a href=https://insomnia.rest/ class=external-link>Insomnia</a>.
It&rsquo;s a great alternative to the <em>P-everyone-knows-that-one.</em>
Insomnia is easy to use on Linux, has plugins, and UI is clean and simple.</p><p>Let me show you some basic features. We will use <a href=https://openweathermap.org/ class=external-link>OpenWeatherMap API</a>.</p><h2 id=workspaces><a href=#workspaces>Workspaces</a></h2><p>Workspaces are collections of thematically combined requests. Some of my workspaces are service-specific,
while others contain everything related to the particular client use case or event (i.e., cross-service).</p><p>Our first examples: get current weather and forecast for Montreal. OpenWeatherMap API requires an API key,
so you need to add it to the query parameters for each request.</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_1_hu_d488b90d1560a01a.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_1.png alt="Insomnia: basic interface" defer></picture></figure></p><h2 id=environments><a href=#environments>Environments</a></h2><p>Too much duplication, isn&rsquo;t it?</p><p>Welcome to environments. Insomnia supports multi-layered variable assignments:</p><ul><li>Base environment: values are accessible regardless of which environment is selected.</li><li>Sub environments: you can create as many as you want. Especially useful for testing APIs on different servers.</li><li>Folder-level environment: requests can be grouped by folders and sometimes it makes sense to assign specific values to all requests in the folder.</li></ul><p>Ok, so for this API let&rsquo;s do like this. <code>https://api.openweathermap.org/data/2.5</code> can go into base,
because we have access only to one server.</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_2_hu_be2a89ecaff1d6d7.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_2.png alt="Insomnia: base environment" defer></picture></figure></p><p>An API key is perfect for the sub environment.</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_3_hu_9aa2c78def955108.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_3.png alt="Insomnia: sub environment" defer></picture></figure></p><p><em>&ldquo;Montreal&rdquo;</em> is stored as a folder-level value, just for the sake of example.</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_4_hu_d53fd851ff9a216b.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_4.png alt="Insomnia: folder-level environment" defer></picture></figure></p><p>Then, our requests will look like (use <code>{{var_name}}</code> to access variable):</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_5_hu_4856ba5779b1bf35.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_5.png alt="Insomnia: requests with variables from environments" defer></picture></figure></p><p>You might notice that we still have to fill out the API key query parameter for each request. Kinda boring.
That&rsquo;s where plugins can help, in this case, it&rsquo;s <code>insomnia-plugin-defaults</code>.
Just go into <em>Preferences > Plugins</em> and type its name to install.
This plugin allows us to set default headers and/or query parameters in the environments.</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_6_hu_156124a7c7cfa256.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_6.png alt="Insomnia: environment setup with query param defaults" defer></picture></figure></p><p>And now we can remove it from requests:</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_7_hu_70dce02822aa04c4.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_7.png alt="Insomnia: requests with default query params" defer></picture></figure></p><h2 id=response-querying><a href=#response-querying>Response querying</a></h2><p>The response for the forecast API is big. What if we want to check all returned values for
weather descriptions? We can do it by using JSONPath response filtering.</p><p><code>$.list[*].weather[*].description</code> means <em>&lsquo;Get descriptions from each element of <code>weather</code>
array that is a property of elements in the <code>list</code> array&rsquo;</em>.</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_8_hu_4e3acf9bf438928d.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_8.png alt="Insomnia: querying response using JSONPath" defer></picture></figure></p><h2 id=generating-values><a href=#generating-values>Generating values</a></h2><p>Sometimes we want to use random values. Insomnia has embedded
<a href=https://support.insomnia.rest/article/40-template-tags class=external-link>template tags</a> for that, like timestamp and UUID. For other
cases plugins come to the rescue yet again: <code>insomnia-plugin-random</code> uses <a href=https://chancejs.com/ class=external-link>Chance</a> library
which gives you tons of options.</p><p>Here is how to generate random latitude and longitude coordinates:</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_9_hu_146e69de675cca6a.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_9.png alt="Insomnia: random value generation" defer></picture></figure></p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_10_hu_860f80608e3f96a.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_10.png alt="Insomnia: usage of generated values in the request" defer></picture></figure></p><p>BTW, use <span class=kbd><kbd>Ctrl</kbd><span>+</span><kbd>Space</kbd></span>
shortcut for the fastest template tag autocomplete.</p><h2 id=reusing-response-values><a href=#reusing-response-values>Reusing response values</a></h2><p>Another commonly used feature is sending a request with values from the response of another request.
In Insomnia you should use <code>Response</code> template tag and JSONPath if you want to grab a value from the response body:</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_11_hu_6467d274a70787cb.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_11.png alt="Insomnia: pulling values from previous response" defer></picture></figure></p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_12_hu_a084006d768ad54c.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_12.png alt="Insomnia: request with pulled values" defer></picture></figure></p><p>Pretty simple, huh?</p><p>There are other useful features and no one stops you from writing a plugin if you miss anything. But, s&rsquo;il te plaît,
don&rsquo;t try to turn it into a complex automation solution. That&rsquo;s what programming languages are for.</p><hr><div class="callout see-also"><p></p><ul><li><a class=internal-link href=https://www.aviskase.com/articles/2020/12/20/using-openapi-cli-intro/>Using <code>openapi-cli</code>: intro</a></li></ul></div></article><div class=article-nav><span class=article-nav-old><a href=https://www.aviskase.com/articles/2020/03/31/hmms-march/ title="Hmms: March"><span class=arrow>◁</span>older</a>
</span><span class=article-nav-middle>&nbsp;&#183;&nbsp;&#183;&nbsp;&#183;&nbsp;</span>
<span class=article-nav-new><a href=https://www.aviskase.com/articles/2020/05/02/hmms-april/ title="Hmms: April">newer<span class=arrow>▶</span></a></span></div></main><footer><span>2025</span><a href=https://infosec.exchange/@aviskase rel=me><svg height="24" viewBox="0 0 24 24" width="24"><path d="m20.94 14c-.28 1.41-2.44 2.96-4.97 3.26-1.31.15-2.6.3-3.97.24-2.25-.11-4-.54-4-.54v.62c.32 2.22 2.22 2.35 4.03 2.42 1.82.05 3.44-.46 3.44-.46l.08 1.65s-1.28.68-3.55.81c-1.25.07-2.81-.03-4.62-.5-3.92-1.05-4.6-5.24-4.7-9.5l-.01-3.43c0-4.34 2.83-5.61 2.83-5.61C6.95 2.3 9.41 2 11.97 2h.06c2.56.0 5.02.3 6.47.96.0.0 2.83 1.27 2.83 5.61.0.0.04 3.21-.39 5.43M18 8.91c0-1.08-.3-1.91-.85-2.56-.56-.63-1.3-.96-2.23-.96-1.06.0-1.87.41-2.42 1.23l-.5.88-.5-.88c-.56-.82-1.36-1.23-2.43-1.23-.92.0-1.66.33-2.23.96C6.29 7 6 7.83 6 8.91v5.26h2.1V9.06c0-1.06.45-1.62 1.36-1.62 1 0 1.5.65 1.5 1.93v2.79h2.07V9.37c0-1.28.5-1.93 1.51-1.93.9.0 1.35.56 1.35 1.62v5.11H18z"/></svg></a><a href=mailto:aviskase@gmail.com>Yuliya Bagriy</a><a href=https://www.aviskase.com/pages/i-dont-track-you/>No tracking</a></footer></body></html>