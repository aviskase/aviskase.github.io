<!doctype html><html lang=en prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#"><head><title>aviskase</title>
<meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta property="og:title" content="Using Insomnia for API exploration"><meta property="og:description" content="One of the tools I use almost daily is Insomnia. It&rsquo;s a great alternative to the P-everyone-knows-that-one. Insomnia is easy to use on Linux, has plugins, and UI is clean and simple.
Let me show you some basic features. We will use OpenWeatherMap API.
WorkspacesWorkspaces are collections of thematically combined requests."><meta name=description content="One of the tools I use almost daily is Insomnia. It&rsquo;s a great alternative to the P-everyone-knows-that-one. Insomnia is easy to use on Linux, has plugins, and UI is clean and simple.
Let me show you some basic features. We will use OpenWeatherMap API.
WorkspacesWorkspaces are collections of thematically combined requests."><meta property="og:url" content="https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/"><link rel=canonical href=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/><meta property="og:type" content="article"><meta property="og:image" content="https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/feature.png"><meta property="og:image:height" content="630"><meta property="og:image:width" content="1200"><meta property="article:published_time" content="2020-04-22T01:06:01+00:00"><meta property="article:modified_time" content="2020-04-22T01:06:01+00:00"><meta property="og:site_name" content="aviskase"><meta property="article:author" content="https://www.aviskase.com/pages/about/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/feature.png"><meta name=twitter:title content="Using Insomnia for API exploration"><meta name=twitter:description content="One of the tools I use almost daily is Insomnia. It&rsquo;s a great alternative to the P-everyone-knows-that-one. Insomnia is easy to use on Linux, has plugins, and UI is clean and simple.
Let me show you some basic features. We will use OpenWeatherMap API.
WorkspacesWorkspaces are collections of thematically combined requests."><meta name=twitter:site content="@aviskase"><meta name=generator content="Hugo 0.121.1"><link rel=stylesheet href="/css/main.min.2e7af902202084f9ac7b62b2d0d18bd8684be837e27b45bde4d2c3442d7b518b.css" integrity="sha256-Lnr5AiAghPmse2Ky0NGL2GhL6Dfie0W95NLDRC17UYs="></head><body><div class="min-h-screen grid grid-rows-mainLayout"><header><nav class="bg-gradient-to-b from-blue-800 to-sky-600 relative lowercase"><div class="pb-12 pt-6 max-w-normal flex flex-wrap items-center normal:items-baseline justify-between mx-6 normal:mx-auto"><a class="text-amber-300 font-bold text-24" href=/>aviskase</a>
<input id=nav-toggle type=checkbox>
<label id=show-button for=nav-toggle class="flex items-center normal:hidden"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" class="w-12 h-12 stroke-amber-300"><title>Menu Open</title><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"/></svg></label><label id=hide-button for=nav-toggle class="items-center hidden"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" class="w-12 h-12 stroke-amber-300"><title>Menu Close</title><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/></svg></label><ul id=nav-menu class="font-semibold text-16 text-white hidden normal:flex mt-3 normal:mt-0 space-y-3 normal:space-y-0 normal:space-x-4.5 w-full normal:w-auto"><li><a href=/>Home</a></li><li><a href=/pages/about/>About</a></li><li><a href=/pages/archive/>Archive</a></li><li><a href=/feeds/all.atom.xml>RSS</a></li></ul></div><div class=shape-divider><svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none"><path d="M0 0V46.29c47.79 22.2 103.59 32.17 158 28 70.36-5.37 136.33-33.31 206.8-37.5C438.64 32.43 512.34 53.67 583 72.05c69.27 18 138.3 24.88 209.4 13.08 36.15-6 69.85-17.84 104.45-29.34C989.49 25 1113-14.29 12e2 52.47V0z" opacity=".25" class="shape-fill"/><path d="M0 0V15.81C13 36.92 27.64 56.86 47.69 72.05 99.41 111.27 165 111 224.58 91.58c31.15-10.15 60.09-26.07 89.67-39.8 40.92-19 84.73-46 130.83-49.67 36.26-2.85 70.9 9.42 98.6 31.56 31.77 25.39 62.32 62 103.63 73 40.44 10.79 81.35-6.69 119.13-24.28s75.16-39 116.92-43.05c59.73-5.85 113.28 22.88 168.9 38.84 30.2 8.66 59 6.17 87.09-7.5 22.43-10.89 48-26.93 60.65-49.24V0z" opacity=".5" class="shape-fill"/><path d="M0 0V5.63C149.93 59 314.09 71.32 475.83 42.57c43-7.64 84.23-20.12 127.61-26.46 59-8.63 112.48 12.24 165.56 35.4C827.93 77.22 886 95.24 951.2 90c86.53-7 172.46-45.71 248.8-84.81V0z" class="shape-fill"/></svg></div></nav></header><main><div class=title-hero><h1>Using Insomnia for API exploration</h1><div class=article-meta><div class=normal:justify-self-end>22 Apr 2020</div><div class="hidden normal:block">&nbsp;—&nbsp;</div><div class="relative normal:justify-self-start"><svg class="inline relative" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg><span>&nbsp;3&nbsp;mins</span></div></div></div><article><p>One of the tools I use almost daily is <a href=https://insomnia.rest/ class=external>Insomnia</a>.
It&rsquo;s a great alternative to the <em>P-everyone-knows-that-one.</em>
Insomnia is easy to use on Linux, has plugins, and UI is clean and simple.</p><p>Let me show you some basic features. We will use <a href=https://openweathermap.org/ class=external>OpenWeatherMap API</a>.</p><div class="relative header-wrapper"><h2 id=workspaces><a href=#workspaces class=header-link><svg xmlns="http://www.w3.org/2000/svg" style="display:inline-block;vertical-align:middle" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a>Workspaces</h2></div><p>Workspaces are collections of thematically combined requests. Some of my workspaces are service-specific,
while others contain everything related to the particular client use case or event (i.e., cross-service).</p><p>Our first examples: get current weather and forecast for Montreal. OpenWeatherMap API requires an API key,
so you need to add it to the query parameters for each request.</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_1_huead573a8756e44bcf75d98811835f592_124055_1920x570_resize_q75_h2_box_3.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_1.png alt="Insomnia: basic interface" defer></picture></figure></p><div class="relative header-wrapper"><h2 id=environments><a href=#environments class=header-link><svg xmlns="http://www.w3.org/2000/svg" style="display:inline-block;vertical-align:middle" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a>Environments</h2></div><p>Too much duplication, isn&rsquo;t it?</p><p>Welcome to environments. Insomnia supports multi-layered variable assignments:</p><ul><li><p>Base environment: values are accessible regardless of which environment is selected.</p></li><li><p>Sub environments: you can create as many as you want. Especially useful for testing APIs on different servers.</p></li><li><p>Folder-level environment: requests can be grouped by folders and sometimes it makes sense to assign specific values
to all requests in the folder.</p></li></ul><p>Ok, so for this API let&rsquo;s do like this. <code>https://api.openweathermap.org/data/2.5</code> can go into base,
because we have access only to one server.</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_2_hua4b6f39ac643996f900fee14788163f0_37132_1038x300_resize_q75_h2_box_3.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_2.png alt="Insomnia: base environment" defer></picture></figure></p><p>An API key is perfect for the sub environment.</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_3_hu726d4745e1ebe860d9fc791057f0b867_34864_1011x300_resize_q75_h2_box_3.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_3.png alt="Insomnia: sub environment" defer></picture></figure></p><p><em>&ldquo;Montreal&rdquo;</em> is stored as a folder-level value, just for the sake of example.</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_4_hub445a22ecd8e9713ba2be35b1026d80b_33058_1137x313_resize_q75_h2_box_3.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_4.png alt="Insomnia: folder-level environment" defer></picture></figure></p><p>Then, our requests will look like (use <code>{{var_name}}</code> to access variable):</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_5_hua0c381ec8ae72d32013b0fc09b58aeea_72498_1200x430_resize_q75_h2_box_3.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_5.png alt="Insomnia: requests with variables from environments" defer></picture></figure></p><p>You might notice that we still have to fill out the API key query parameter for each request. Kinda boring.
That&rsquo;s where plugins can help, in this case, it&rsquo;s <code>insomnia-plugin-defaults</code>.
Just go into <em>Preferences > Plugins</em> and type its name to install.
This plugin allows us to set default headers and/or query parameters in the environments.</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_6_hu2a51f86aff89648f713e07b2827abf03_48228_1021x459_resize_q75_h2_box_3.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_6.png alt="Insomnia: environment setup with query param defaults" defer></picture></figure></p><p>And now we can remove it from requests:</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_7_hubab8ca579e73ea44132c477fceb39822_63604_1146x376_resize_q75_h2_box_3.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_7.png alt="Insomnia: requests with default query params" defer></picture></figure></p><div class="relative header-wrapper"><h2 id=response-querying><a href=#response-querying class=header-link><svg xmlns="http://www.w3.org/2000/svg" style="display:inline-block;vertical-align:middle" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a>Response querying</h2></div><p>The response for the forecast API is big. What if we want to check all returned values for
weather descriptions? We can do it by using JSONPath response filtering.</p><p><code>$.list[*].weather[*].description</code> means <em>&lsquo;Get descriptions from each element of <code>weather</code>
array that is a property of elements in the <code>list</code> array&rsquo;</em>.</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_8_hu749a941adcfe38452b5e14edfe466a64_109722_704x868_resize_q75_h2_box_3.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_8.png alt="Insomnia: querying response using JSONPath" defer></picture></figure></p><div class="relative header-wrapper"><h2 id=generating-values><a href=#generating-values class=header-link><svg xmlns="http://www.w3.org/2000/svg" style="display:inline-block;vertical-align:middle" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a>Generating values</h2></div><p>Sometimes we want to use random values. Insomnia has embedded
<a href=https://support.insomnia.rest/article/40-template-tags class=external>template tags</a> for that, like timestamp and UUID. For other
cases plugins come to the rescue yet again: <code>insomnia-plugin-random</code> uses <a href=https://chancejs.com/ class=external>Chance</a> library
which gives you tons of options.</p><p>Here is how to generate random latitude and longitude coordinates:</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_9_hu42eb8436ef1f5b1e7af4f8a0c2589b0d_39735_1083x675_resize_q75_h2_box_3.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_9.png alt="Insomnia: random value generation" defer></picture></figure></p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_10_hu25d0cfcc0e4bd98897b5c1a3118eb575_78802_1247x401_resize_q75_h2_box_3.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_10.png alt="Insomnia: usage of generated values in the request" defer></picture></figure></p><p>BTW, use <span class=keys><kbd>Ctrl</kbd><span>+</span><kbd>Space</kbd></span>
shortcut for the fastest template tag autocomplete.</p><div class="relative header-wrapper"><h2 id=reusing-response-values><a href=#reusing-response-values class=header-link><svg xmlns="http://www.w3.org/2000/svg" style="display:inline-block;vertical-align:middle" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a>Reusing response values</h2></div><p>Another commonly used feature is sending a request with values from the response of another request.
In Insomnia you should use <code>Response</code> template tag and JSONPath if you want to grab a value from the response body:</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_11_hubc9562b6464e2e291fc3734b9c92956a_66487_1088x857_resize_q75_h2_box_3.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_11.png alt="Insomnia: pulling values from previous response" defer></picture></figure></p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_12_huff2b9c149b03061dcf937123bbaa4b75_78338_1178x388_resize_q75_h2_box_3.webp type=image/webp><img src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_12.png alt="Insomnia: request with pulled values" defer></picture></figure></p><p>Pretty simple, huh?</p><p>There are other useful features and no one stops you from writing a plugin if you miss anything. But, s&rsquo;il te plaît,
don&rsquo;t try to turn it into a complex automation solution. That&rsquo;s what programming languages are for.</p><hr><p>See also:</p><ul><li><a class=internal href=https://www.aviskase.com/articles/2020/12/20/using-openapi-cli-intro/>Using <code>openapi-cli</code>: intro</a></li></ul></article><div class=page-navigation><a class=prev href=https://www.aviskase.com/articles/2020/03/31/hmms-march/ title="Hmms: March"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 17l-5-5 5-5m7 10-5-5 5-5"/></svg>older</a>
<span class=separator>&nbsp; &#183; &nbsp; &#183; &nbsp; &#183; &nbsp;</span>
<a class=next href=https://www.aviskase.com/articles/2020/05/02/hmms-april/ title="Hmms: April">newer<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 17l5-5-5-5M6 17l5-5-5-5"/></svg></a></div></main><footer class="justify-center flex w-full pt-6 pb-4 text-16 bg-amber-300 mt-12"><a class="border-b-2 border-transparent hover:border-blue-500" href=mailto:aviskase@gmail.com>Yuliya Bagriy</a><span>&nbsp;&#183;&nbsp;2023&nbsp;&#183;&nbsp;</span><a class="border-b-2 border-transparent hover:border-blue-500" href=https://www.aviskase.com/pages/i-dont-track-you/>No tracking</a></footer></div></body></html>