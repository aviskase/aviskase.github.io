<!doctype html><html lang=en prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#"><head><title>Using Insomnia for API exploration | aviskase</title><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta property="og:title" content="Using Insomnia for API exploration"><meta property="og:description" content="One of the tools I use almost daily is Insomnia. It&rsquo;s a great alternative to the P-everyone-knows-that-one. Insomnia is easy to use on Linux, has plugins, and UI is clean and simple.
Let me show you some basic features. We will use OpenWeatherMap API.
Workspaces Workspaces are collections of thematically combined requests."><meta name=description content="One of the tools I use almost daily is Insomnia. It&rsquo;s a great alternative to the P-everyone-knows-that-one. Insomnia is easy to use on Linux, has plugins, and UI is clean and simple.
Let me show you some basic features. We will use OpenWeatherMap API.
Workspaces Workspaces are collections of thematically combined requests."><meta property="og:url" content="https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/"><link rel=canonical href=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/><meta property="og:type" content="article"><meta property="og:image" content="https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/feature.png"><meta property="og:image:height" content="630"><meta property="og:image:width" content="1200"><meta property="article:published_time" content="2020-04-22T01:06:01+00:00"><meta property="article:modified_time" content="2020-04-22T01:06:01+00:00"><meta property="og:site_name" content="aviskase"><meta property="article:author" content="https://www.aviskase.com/pages/about/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/feature.png"><meta name=twitter:title content="Using Insomnia for API exploration"><meta name=twitter:description content="One of the tools I use almost daily is Insomnia. It&rsquo;s a great alternative to the P-everyone-knows-that-one. Insomnia is easy to use on Linux, has plugins, and UI is clean and simple.
Let me show you some basic features. We will use OpenWeatherMap API.
Workspaces Workspaces are collections of thematically combined requests."><meta name=twitter:site content="@aviskase"><link rel=icon href=/theme/img/favicon.ico><link rel=stylesheet href=//code.cdn.mozilla.net/fonts/fira.css><link rel=stylesheet type=text/css href=/theme/css/fontello.css><link rel=stylesheet type=text/css href=/theme/css/style.css></head><body id=index class=home><nav><ul><li><a class=site-title href=/>aviskase</a></li><li><a href=/>Blog</a></li><li><a href=/pages/about/>About</a></li><li><a href=/feeds/all.atom.xml>RSS</a></li></ul></nav><main><article><h1>Using Insomnia for API exploration</h1><div class=article-meta><time class=published>22 Apr 2020</time>
<span class=readtime><span class=icon-clock aria-hidden=true></span>3&nbsp;mins</span></div><p>One of the tools I use almost daily is <a href=https://insomnia.rest/ class=external>Insomnia</a>.
It&rsquo;s a great alternative to the <em>P-everyone-knows-that-one.</em>
Insomnia is easy to use on Linux, has plugins, and UI is clean and simple.</p><p>Let me show you some basic features. We will use <a href=https://openweathermap.org/ class=external>OpenWeatherMap API</a>.</p><h2 id=workspaces>Workspaces</h2><p>Workspaces are collections of thematically combined requests. Some of my workspaces are service-specific,
while others contain everything related to the particular client use case or event (i.e., cross-service).</p><p>Our first examples: get current weather and forecast for Montreal. OpenWeatherMap API requires an API key,
so you need to add it to the query parameters for each request.</p><p><img width=1920 height=570 sizes="(min-width: 1180px) 888px, (min-width: 960px) calc(49.5vw + 314px), (min-width: 600px) calc(100vw - 40px), 100vw" srcset="https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_1_huead573a8756e44bcf75d98811835f592_124055_500x0_resize_box_2.png 500w, https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_1_huead573a8756e44bcf75d98811835f592_124055_800x0_resize_box_2.png 800w, https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_1_huead573a8756e44bcf75d98811835f592_124055_1200x0_resize_box_2.png 1200w, https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_1_huead573a8756e44bcf75d98811835f592_124055_1500x0_resize_box_2.png 1500w" src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_1.png alt="Insomnia: basic interface"></p><h2 id=environments>Environments</h2><p>Too much duplication, isn&rsquo;t it?</p><p>Welcome to environments. Insomnia supports multi-layered variable assignments:</p><ul><li><p>Base environment: values are accessible regardless of which environment is selected.</p></li><li><p>Sub environments: you can create as many as you want. Especially useful for testing APIs on different servers.</p></li><li><p>Folder-level environment: requests can be grouped by folders and sometimes it makes sense to assign specific values
to all requests in the folder.</p></li></ul><p>Ok, so for this API let&rsquo;s do like this. <code>https://api.openweathermap.org/data/2.5</code> can go into base,
because we have access only to one server.</p><p><img width=1038 height=300 sizes="(min-width: 1180px) 888px, (min-width: 960px) calc(49.5vw + 314px), (min-width: 600px) calc(100vw - 40px), 100vw" srcset="https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_2_hua4b6f39ac643996f900fee14788163f0_37132_500x0_resize_box_2.png 500w, https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_2_hua4b6f39ac643996f900fee14788163f0_37132_800x0_resize_box_2.png 800w" src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_2.png alt="Insomnia: base environment"></p><p>An API key is perfect for the sub environment.</p><p><img width=1011 height=300 sizes="(min-width: 1180px) 888px, (min-width: 960px) calc(49.5vw + 314px), (min-width: 600px) calc(100vw - 40px), 100vw" srcset="https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_3_hu726d4745e1ebe860d9fc791057f0b867_34864_500x0_resize_box_2.png 500w, https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_3_hu726d4745e1ebe860d9fc791057f0b867_34864_800x0_resize_box_2.png 800w" src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_3.png alt="Insomnia: sub environment"></p><p><em>&ldquo;Montreal&rdquo;</em> is stored as a folder-level value, just for the sake of example.</p><p><img width=1137 height=313 sizes="(min-width: 1180px) 888px, (min-width: 960px) calc(49.5vw + 314px), (min-width: 600px) calc(100vw - 40px), 100vw" srcset="https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_4_hub445a22ecd8e9713ba2be35b1026d80b_33058_500x0_resize_box_2.png 500w, https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_4_hub445a22ecd8e9713ba2be35b1026d80b_33058_800x0_resize_box_2.png 800w" src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_4.png alt="Insomnia: folder-level environment"></p><p>Then, our requests will look like (use <code>{{var_name}}</code> to access variable):</p><p><img width=1200 height=430 sizes="(min-width: 1180px) 888px, (min-width: 960px) calc(49.5vw + 314px), (min-width: 600px) calc(100vw - 40px), 100vw" srcset="https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_5_hua0c381ec8ae72d32013b0fc09b58aeea_72498_500x0_resize_box_2.png 500w, https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_5_hua0c381ec8ae72d32013b0fc09b58aeea_72498_800x0_resize_box_2.png 800w, https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_5_hua0c381ec8ae72d32013b0fc09b58aeea_72498_1200x0_resize_box_2.png 1200w" src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_5.png alt="Insomnia: requests with variables from environments"></p><p>You might notice that we still have to fill out the API key query parameter for each request. Kinda boring.
That&rsquo;s where plugins can help, in this case, it&rsquo;s <code>insomnia-plugin-defaults</code>.
Just go into <em>Preferences > Plugins</em> and type its name to install.
This plugin allows us to set default headers and/or query parameters in the environments.</p><p><img width=1021 height=459 sizes="(min-width: 1180px) 888px, (min-width: 960px) calc(49.5vw + 314px), (min-width: 600px) calc(100vw - 40px), 100vw" srcset="https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_6_hu2a51f86aff89648f713e07b2827abf03_48228_500x0_resize_box_2.png 500w, https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_6_hu2a51f86aff89648f713e07b2827abf03_48228_800x0_resize_box_2.png 800w" src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_6.png alt="Insomnia: environment setup with query param defaults"></p><p>And now we can remove it from requests:</p><p><img width=1146 height=376 sizes="(min-width: 1180px) 888px, (min-width: 960px) calc(49.5vw + 314px), (min-width: 600px) calc(100vw - 40px), 100vw" srcset="https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_7_hubab8ca579e73ea44132c477fceb39822_63604_500x0_resize_box_2.png 500w, https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_7_hubab8ca579e73ea44132c477fceb39822_63604_800x0_resize_box_2.png 800w" src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_7.png alt="Insomnia: requests with default query params"></p><h2 id=response-querying>Response querying</h2><p>The response for the forecast API is big. What if we want to check all returned values for
weather descriptions? We can do it by using JSONPath response filtering.</p><p><code>$.list[*].weather[*].description</code> means <em>&lsquo;Get descriptions from each element of <code>weather</code>
array that is a property of elements in the <code>list</code> array&rsquo;</em>.</p><p><img width=704 height=868 sizes="(min-width: 1180px) 888px, (min-width: 960px) calc(49.5vw + 314px), (min-width: 600px) calc(100vw - 40px), 100vw" srcset="https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_8_hu749a941adcfe38452b5e14edfe466a64_109722_500x0_resize_box_2.png 500w" src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_8.png alt="Insomnia: querying response using JSONPath"></p><h2 id=generating-values>Generating values</h2><p>Sometimes we want to use random values. Insomnia has embedded
<a href=https://support.insomnia.rest/article/40-template-tags class=external>template tags</a> for that, like timestamp and UUID. For other
cases plugins come to the rescue yet again: <code>insomnia-plugin-random</code> uses <a href=https://chancejs.com/ class=external>Chance</a> library
which gives you tons of options.</p><p>Here is how to generate random latitude and longitude coordinates:</p><p><img width=1083 height=675 sizes="(min-width: 1180px) 888px, (min-width: 960px) calc(49.5vw + 314px), (min-width: 600px) calc(100vw - 40px), 100vw" srcset="https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_9_hu42eb8436ef1f5b1e7af4f8a0c2589b0d_39735_500x0_resize_box_2.png 500w, https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_9_hu42eb8436ef1f5b1e7af4f8a0c2589b0d_39735_800x0_resize_box_2.png 800w" src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_9.png alt="Insomnia: random value generation"></p><p><img width=1247 height=401 sizes="(min-width: 1180px) 888px, (min-width: 960px) calc(49.5vw + 314px), (min-width: 600px) calc(100vw - 40px), 100vw" srcset="https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_10_hu25d0cfcc0e4bd98897b5c1a3118eb575_78802_500x0_resize_box_2.png 500w, https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_10_hu25d0cfcc0e4bd98897b5c1a3118eb575_78802_800x0_resize_box_2.png 800w, https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_10_hu25d0cfcc0e4bd98897b5c1a3118eb575_78802_1200x0_resize_box_2.png 1200w" src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_10.png alt="Insomnia: usage of generated values in the request"></p><p>BTW, use <span class=keys><kbd>Ctrl</kbd><span>+</span><kbd>Space</kbd></span>
shortcut for the fastest template tag autocomplete.</p><h2 id=reusing-response-values>Reusing response values</h2><p>Another commonly used feature is sending a request with values from the response of another request.
In Insomnia you should use <code>Response</code> template tag and JSONPath if you want to grab a value from the response body:</p><p><img width=1088 height=857 sizes="(min-width: 1180px) 888px, (min-width: 960px) calc(49.5vw + 314px), (min-width: 600px) calc(100vw - 40px), 100vw" srcset="https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_11_hubc9562b6464e2e291fc3734b9c92956a_66487_500x0_resize_box_2.png 500w, https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_11_hubc9562b6464e2e291fc3734b9c92956a_66487_800x0_resize_box_2.png 800w" src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_11.png alt="Insomnia: pulling values from previous response"></p><p><img width=1178 height=388 sizes="(min-width: 1180px) 888px, (min-width: 960px) calc(49.5vw + 314px), (min-width: 600px) calc(100vw - 40px), 100vw" srcset="https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_12_huff2b9c149b03061dcf937123bbaa4b75_78338_500x0_resize_box_2.png 500w, https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_12_huff2b9c149b03061dcf937123bbaa4b75_78338_800x0_resize_box_2.png 800w" src=https://www.aviskase.com/articles/2020/04/22/using-insomnia-for-api-exploration/insomnia_12.png alt="Insomnia: request with pulled values"></p><p>Pretty simple, huh?</p><p>There are other useful features and no one stops you from writing a plugin if you miss anything. But, s&rsquo;il te pla√Æt,
don&rsquo;t try to turn it into a complex automation solution. That&rsquo;s what programming languages are for.</p><div class="page-navigation code"><a class=prev href=https://www.aviskase.com/articles/2020/03/31/hmms-march/ title="Hmms: March">&larr; older</a>
<span>&nbsp; &#183; &nbsp; &#183; &nbsp; &#183; &nbsp;</span>
<a class=next href=https://www.aviskase.com/articles/2020/05/02/hmms-april/ title="Hmms: April">newer &rarr;</a></div></article></main><footer><a href=mailto:aviskase@gmail.com>Yuliya Bagriy</a><span> &#183; 2020 &#183; </span><a href=https://www.aviskase.com/pages/i-dont-track-you/>No tracking</a></footer></body></html>