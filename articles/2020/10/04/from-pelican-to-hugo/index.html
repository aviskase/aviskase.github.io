<!doctype html><html lang=en prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#"><head><base href=https://www.aviskase.com/articles/2020/10/04/from-pelican-to-hugo/><title>From Pelican to Hugo | aviskase</title>
<meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta property="og:title" content="From Pelican to Hugo"><meta name=twitter:title content="From Pelican to Hugo"><meta property="og:description" content="As I mentioned in one of the last articles I was planning to migrate this blog from Pelican to other static site generator.

  Why and where

Reasons:

Pelican got a new major version 4, which required some migration work on my side either way.
When I&rsquo;m fixing spelling and style I prefer checking on rendered local site and not raw markdown. But live reload became too slow and frustrating (every change took approximately 1-3 minutes).
I just love to switch gears occasionally. This blog was originally built with Jekyll (until mid-2019).

So, I opened StaticGen to check what was trendy. My final choice was between Gatsby and Hugo."><meta property="twitter:description" content="As I mentioned in one of the last articles I was planning to migrate this blog from Pelican to other static site generator.

  Why and where

Reasons:

Pelican got a new major version 4, which required some migration work on my side either way.
When I&rsquo;m fixing spelling and style I prefer checking on rendered local site and not raw markdown. But live reload became too slow and frustrating (every change took approximately 1-3 minutes).
I just love to switch gears occasionally. This blog was originally built with Jekyll (until mid-2019).

So, I opened StaticGen to check what was trendy. My final choice was between Gatsby and Hugo."><meta name=description content="As I mentioned in one of the last articles I was planning to migrate this blog from Pelican to other static site generator.

  Why and where

Reasons:

Pelican got a new major version 4, which required some migration work on my side either way.
When I&rsquo;m fixing spelling and style I prefer checking on rendered local site and not raw markdown. But live reload became too slow and frustrating (every change took approximately 1-3 minutes).
I just love to switch gears occasionally. This blog was originally built with Jekyll (until mid-2019).

So, I opened StaticGen to check what was trendy. My final choice was between Gatsby and Hugo."><meta property="og:url" content="https://www.aviskase.com/articles/2020/10/04/from-pelican-to-hugo/"><link rel=canonical href=https://www.aviskase.com/articles/2020/10/04/from-pelican-to-hugo/><meta property="og:type" content="article"><meta property="article:published_time" content="2020-10-04T22:46:54-04:00"><meta property="article:modified_time" content="2020-10-04T22:46:54-04:00"><meta property="og:site_name" content="aviskase"><meta property="article:author" content="https://www.aviskase.com/pages/about/"><meta name=twitter:card content="summary"><meta name=twitter:creator content="@aviskase"><link rel=me href=https://infosec.exchange/@aviskase><meta name=fediverse:creator content="@aviskase@infosec.exchange"><meta name=generator content="Hugo 0.145.0"><link rel=stylesheet href=/css/main.min.815433e58de836da2481c3a3273efd8c9a7b36ca6f7502da69c5b32e67c00a27.css integrity="sha256-gVQz5Y3oNtokgcOjJz79jJp7NspvdQLaacWzLmfACic="><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest></head><body><header><a href=/ class=title>aviskase</a><p><a href=/>Home</a>
<a href=/pages/about/>About</a>
<a href=/pages/archive/>Archive</a>
<a href=/feeds/all.atom.xml>RSS</a></p></header><main><div class=title><h1>From Pelican to Hugo</h1></div><table class=article-props><tr><th class=width-min>published</th><td class=width-auto>2020-10-04</td></tr><tr><th class=width-min>reading&nbsp;time</th><td class=width-auto>4&nbsp;mins</td></tr></table><article><p><a href=https://www.aviskase.com/articles/2020/08/30/remembering-javascript-and-typescript/ class=internal-link>As I mentioned in one of the last articles</a> I was planning to migrate this blog from <a href=https://github.com/getpelican/pelican class=external-link>Pelican</a> to other static site generator.</p><h2 id=why-and-where><a href=#why-and-where>Why and where</a></h2><p>Reasons:</p><ul><li>Pelican got a new major version 4, which required some migration work on my side either way.</li><li>When I&rsquo;m fixing spelling and style I prefer checking on rendered local site and not raw markdown. But live reload became too slow and frustrating (every change took approximately 1-3 minutes).</li><li>I just love to switch gears occasionally. This blog was originally built with <a href=https://jekyllrb.com/ class=external-link>Jekyll</a> (until mid-2019).</li></ul><p>So, I opened <a href=https://www.staticgen.com/ class=external-link>StaticGen</a> to check what was trendy. My final choice was between <a href=https://www.gatsbyjs.com/ class=external-link>Gatsby</a> and <a href=https://gohugo.io/ class=external-link>Hugo</a>.</p><table><thead><tr><th>Gatsby</th><th>Hugo</th></tr></thead><tbody><tr><td>JS-based, good for enforcing much-needed JS deep dive</td><td>Go-based, simply cool.</td></tr><tr><td>Very flexible, tons of plugins, data pulling via GraphQL</td><td>Somewhat flexible. Still not sure about plugins.</td></tr><tr><td>Praised for fast loading, especially if you have JS</td><td>Fast building. Extremely fast building.</td></tr><tr><td>Often used for API dev portals</td><td></td></tr></tbody></table><p>As you have guessed by the title, I went with Hugo because:</p><ul><li>I don&rsquo;t need JS on the site itself</li><li>I&rsquo;m more interested in fast builds than loading</li><li>I heard that Go is the dumbest language in the world, might as well experience some of it xD</li></ul><h2 id=migration-shenanigans><a href=#migration-shenanigans>Migration shenanigans</a></h2><p>Pelican and Hugo have a very different template format. Rewriting took most of the time, but as you can see, there are no visual changes. I also had to write Atom feed template almost from scratch and test it to make sure that <code>id</code>&rsquo;s are the same and the whole feed won&rsquo;t be completely regenerated (like it happened the last migration.)</p><p>But Hugo templates are way more flexible than Pelican&rsquo;s. What I had to do with plugins was achieved with core features. I also fell in love with <a href=https://gohugo.io/content-management/shortcodes/ class=external-link>shortcodes</a> and <a href=https://gohugo.io/getting-started/configuration-markup/#markdown-render-hooks class=external-link>markdown render hooks</a> which allow further customizations. For example, I used to have a Pelican plugin that detects links to external resources and adds a special <code>external</code> CSS class to them. Now the whole plugin is replaced with one link render hook that I can easily customize as I want later:</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go-html-template data-lang=go-html-template><span style=display:flex><span>&lt;<span style=color:#cba6f7>a</span> <span style=color:#89b4fa>href</span><span style=color:#89dceb;font-weight:700>=</span><span style=color:#a6e3a1>&#34;</span><span style=color:#6c7086;font-style:italic>{{</span> <span style=color:#89b4fa>.Destination</span> <span style=color:#89dceb;font-weight:700>|</span> safeURL <span style=color:#6c7086;font-style:italic>}}</span><span style=color:#a6e3a1>&#34;</span><span style=color:#6c7086;font-style:italic>{{</span> <span style=color:#cba6f7>if</span> strings<span style=color:#89b4fa>.HasPrefix</span> <span style=color:#89b4fa>.Destination</span> <span style=color:#a6e3a1>&#34;http&#34;</span> <span style=color:#6c7086;font-style:italic>}}</span> <span style=color:#89b4fa>class</span><span style=color:#89dceb;font-weight:700>=</span><span style=color:#a6e3a1>&#34;external&#34;</span><span style=color:#6c7086;font-style:italic>{{</span> <span style=color:#cba6f7>end</span> <span style=color:#6c7086;font-style:italic>}}</span>&gt;<span style=color:#6c7086;font-style:italic>{{</span> <span style=color:#89b4fa>.Text</span> <span style=color:#89dceb;font-weight:700>|</span> safeHTML <span style=color:#6c7086;font-style:italic>}}</span>&lt;/<span style=color:#cba6f7>a</span>&gt;
</span></span></code></pre></div><p>Second problem was the markdown sources. They had special Pelican front matter format, not compatible with any supported by Hugo (YAML, TOML, JSON, Org). Yikes. Same for <code>!!! note</code> admonition syntax, <code>kbd</code> auto-detection (all replaced by shortcode), and internal links. I don&rsquo;t have too much content, so most of the work was done via <code>grep</code> and manually replacing stuff.</p><p>Third problem was images. The simple solution would be to set them all to <code>static</code> folder, but it&rsquo;s not a recommended approach because you wouldn&rsquo;t be able to use image processing features. Thus, you should go with <code>assets</code> or <a href=https://gohugo.io/content-management/page-bundles/ class=external-link>page bundles</a>. I prefer bundles because they create a clear distinction where each image belongs to.</p><h2 id=changes-to-the-site><a href=#changes-to-the-site>Changes to the site</a></h2><p>While I was trying to preserve as much as I could, there are some <em>intentional</em> changes:</p><ul><li>No more tagging and categories. I never used them; when I needed to find anything, I just used search. Perhaps it will also force me to make titles more explicit.</li><li>No Google tag (aka analytics). While it had been respecting all possible &ldquo;Do Not Track&rdquo; settings, I ditched it completely. At first, it was fun to watch graphs, incoming sources, and play with smart goals, but after a while I stopped caring. Search console is more than enough.</li><li>No Disqus comments. Not much value in them anyway (maybe I should actually use Twitter? LOL.)</li></ul><h2 id=results><a href=#results>Results</a></h2><p>I&rsquo;m quite happy with the migration. It is blazing fast as advertised: GitHub action build went from 2-3 minutes down to 30 seconds. And local live reload is faster than it takes to turn my head to the browser tab.</p><p>There is only one problem left. I used <code>img</code> shortcode <a href=https://laurakalbag.com/processing-responsive-images-with-hugo/ class=external-link>to generate responsive images</a>, but for some reason on my site browsers select too low resolution. I tried to understand why yet couldn&rsquo;t: I had less trouble hacking my way through GnuCash reporting in Scheme (which I don&rsquo;t know) than trying to fix the damn CSS. Current style sheet was borrowed from some theme and reworked over time, but it probably doesn&rsquo;t follow modern best practices. Hugo documentation introduced me to <a href=https://tailwindcss.com/ class=external-link>Tailwind CSS</a> and <a href=https://postcss.org/ class=external-link>PostCSS</a>; and while I hate CSS, the time for redesign has come.</p></article><div class=article-nav><span class=article-nav-old><a href=https://www.aviskase.com/articles/2020/09/15/conference-notes-asc-2020/ title="Conference notes: ASC 2020"><span class=arrow>◁</span>older</a>
</span><span class=article-nav-middle>&nbsp;&#183;&nbsp;&#183;&nbsp;&#183;&nbsp;</span>
<span class=article-nav-new><a href=https://www.aviskase.com/articles/2020/10/18/blog-redesign-phase-1/ title="Blog redesign: phase 1">newer<span class=arrow>▶</span></a></span></div></main><footer><span>2025</span><a href=https://infosec.exchange/@aviskase rel=me><svg height="24" viewBox="0 0 24 24" width="24"><path d="m20.94 14c-.28 1.41-2.44 2.96-4.97 3.26-1.31.15-2.6.3-3.97.24-2.25-.11-4-.54-4-.54v.62c.32 2.22 2.22 2.35 4.03 2.42 1.82.05 3.44-.46 3.44-.46l.08 1.65s-1.28.68-3.55.81c-1.25.07-2.81-.03-4.62-.5-3.92-1.05-4.6-5.24-4.7-9.5l-.01-3.43c0-4.34 2.83-5.61 2.83-5.61C6.95 2.3 9.41 2 11.97 2h.06c2.56.0 5.02.3 6.47.96.0.0 2.83 1.27 2.83 5.61.0.0.04 3.21-.39 5.43M18 8.91c0-1.08-.3-1.91-.85-2.56-.56-.63-1.3-.96-2.23-.96-1.06.0-1.87.41-2.42 1.23l-.5.88-.5-.88c-.56-.82-1.36-1.23-2.43-1.23-.92.0-1.66.33-2.23.96C6.29 7 6 7.83 6 8.91v5.26h2.1V9.06c0-1.06.45-1.62 1.36-1.62 1 0 1.5.65 1.5 1.93v2.79h2.07V9.37c0-1.28.5-1.93 1.51-1.93.9.0 1.35.56 1.35 1.62v5.11H18z"/></svg></a><a href=mailto:aviskase@gmail.com>Yuliya Bagriy</a><a href=https://www.aviskase.com/pages/i-dont-track-you/>No tracking</a></footer></body></html>