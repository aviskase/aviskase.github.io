<!doctype html><html lang=en prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#"><head><title>aviskase</title><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta property="og:title" content="Using openapi-cli for API exploration"><meta property="og:description" content="As promised, let&rsquo;s dive into the usage of openapi-cli. The first topic is semi-non-technical: API exploration. You might be interested if:
 you&rsquo;re a tech writer you&rsquo;re a tester you don&rsquo;t know what the heck API exploration is  What is API explorationI use this term akin to exploratory testing. You can search for works of Cem Kaner, James Bach, Michael Bolton, Elisabeth Hendrickson, James Whittaker, but beware, that&rsquo;s a nice little serpentarium of a field."><meta name=description content="As promised, let&rsquo;s dive into the usage of openapi-cli. The first topic is semi-non-technical: API exploration. You might be interested if:
 you&rsquo;re a tech writer you&rsquo;re a tester you don&rsquo;t know what the heck API exploration is  What is API explorationI use this term akin to exploratory testing. You can search for works of Cem Kaner, James Bach, Michael Bolton, Elisabeth Hendrickson, James Whittaker, but beware, that&rsquo;s a nice little serpentarium of a field."><meta property="og:url" content="https://www.aviskase.com/articles/2021/01/10/using-openapi-cli-for-api-exploration/"><link rel=canonical href=https://www.aviskase.com/articles/2021/01/10/using-openapi-cli-for-api-exploration/><meta property="og:type" content="article"><meta property="og:image" content="https://www.aviskase.com/articles/2021/01/10/using-openapi-cli-for-api-exploration/feature.png"><meta property="og:image:height" content="630"><meta property="og:image:width" content="1200"><meta property="article:published_time" content="2021-01-10T14:28:31-05:00"><meta property="article:modified_time" content="2021-01-10T14:28:31-05:00"><meta property="og:site_name" content="aviskase"><meta property="article:author" content="https://www.aviskase.com/pages/about/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.aviskase.com/articles/2021/01/10/using-openapi-cli-for-api-exploration/feature.png"><meta name=twitter:title content="Using `openapi-cli` for API exploration"><meta name=twitter:description content="As promised, let&rsquo;s dive into the usage of openapi-cli. The first topic is semi-non-technical: API exploration. You might be interested if:
 you&rsquo;re a tech writer you&rsquo;re a tester you don&rsquo;t know what the heck API exploration is  What is API explorationI use this term akin to exploratory testing. You can search for works of Cem Kaner, James Bach, Michael Bolton, Elisabeth Hendrickson, James Whittaker, but beware, that&rsquo;s a nice little serpentarium of a field."><meta name=twitter:site content="@aviskase"><meta name=generator content="Hugo 0.79.1"><link rel=stylesheet href=/css/main.min.c6879ccd9f3bf87ac19a486cfcd6fd4da740d9633df99b6dd74634c02896ad32.css integrity=sha256-xoeczZ87+HrBmkhs/Nb9TadA2WM9+Ztt10Y0wCiWrTI=></head><body><div class="min-h-screen grid grid-rows-mainLayout"><header><nav class="bg-gradient-to-b from-bgdark to-bglight relative lowercase"><div class="pb-12 pt-6 max-w-normal flex flex-wrap items-center normal:items-baseline justify-between mx-6 normal:mx-auto"><a class="text-primary font-bold text-24" href=/>aviskase</a>
<input id=nav-toggle type=checkbox>
<label id=show-button for=nav-toggle class="flex items-center normal:hidden"><svg class="h-8 w-8" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>Menu Open</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0V0z"/></svg></label><label id=hide-button for=nav-toggle class="items-center hidden"><svg class="h-8 w-8" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>Menu Close</title><polygon points="11 9 22 9 22 11 11 11 11 22 9 22 9 11 -2 11 -2 9 9 9 9 -2 11 -2" transform="rotate(45 10 10)"/></svg></label><ul id=nav-menu class="font-semibold text-16 hidden normal:flex mt-3 normal:mt-0 space-y-3 normal:space-y-0 normal:space-x-4.5 w-full normal:w-auto"><li><a href=/>Home</a></li><li><a href=/pages/about/>About</a></li><li><a href=/pages/archive/>Archive</a></li><li><a href=/feeds/all.atom.xml>RSS</a></li></ul></div><div class=shape-divider><svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none"><path d="M0 0V46.29c47.79 22.2 103.59 32.17 158 28 70.36-5.37 136.33-33.31 206.8-37.5C438.64 32.43 512.34 53.67 583 72.05c69.27 18 138.3 24.88 209.4 13.08 36.15-6 69.85-17.84 104.45-29.34C989.49 25 1113-14.29 12e2 52.47V0z" opacity=".25" class="shape-fill"/><path d="M0 0V15.81C13 36.92 27.64 56.86 47.69 72.05 99.41 111.27 165 111 224.58 91.58c31.15-10.15 60.09-26.07 89.67-39.8 40.92-19 84.73-46 130.83-49.67 36.26-2.85 70.9 9.42 98.6 31.56 31.77 25.39 62.32 62 103.63 73 40.44 10.79 81.35-6.69 119.13-24.28s75.16-39 116.92-43.05c59.73-5.85 113.28 22.88 168.9 38.84 30.2 8.66 59 6.17 87.09-7.5 22.43-10.89 48-26.93 60.65-49.24V0z" opacity=".5" class="shape-fill"/><path d="M0 0V5.63C149.93 59 314.09 71.32 475.83 42.57c43-7.64 84.23-20.12 127.61-26.46 59-8.63 112.48 12.24 165.56 35.4C827.93 77.22 886 95.24 951.2 90c86.53-7 172.46-45.71 248.8-84.81V0z" class="shape-fill"/></svg></div></nav></header><main><div class=title-hero><h1>Using <code>openapi-cli</code> for API exploration</h1><div class=article-meta><div class=normal:justify-self-end>10 Jan 2021</div><div class="hidden normal:block">&nbsp;—&nbsp;</div><div class="relative normal:justify-self-start"><svg class="inline relative" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg><span>&nbsp;4&nbsp;mins</span></div></div></div><article><p><a href=https://www.aviskase.com/articles/2020/12/20/using-openapi-cli-intro/ class=internal>As promised</a>, let&rsquo;s dive into the usage of <code>openapi-cli</code>. The first topic is semi-non-technical: API exploration. You might be interested if:</p><ul><li>you&rsquo;re a tech writer</li><li>you&rsquo;re a tester</li><li>you don&rsquo;t know what the heck API exploration is</li></ul><div class="relative header-wrapper"><h2 id=what-is-api-exploration><a href=#what-is-api-exploration class=header-link><svg xmlns="http://www.w3.org/2000/svg" style="display:inline-block;vertical-align:middle" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a>What is API exploration</h2></div><p>I use this term akin to <em>exploratory testing</em>. You can search for works of Cem Kaner, James Bach, Michael Bolton, Elisabeth Hendrickson, James Whittaker, but beware, that&rsquo;s a nice little serpentarium of a field.</p><p>In the simplest words, it is a process of learning something about API I don&rsquo;t know or have a limited information about. That&rsquo;s it. The main contexts for this activity are:</p><ul><li><strong>Necessity</strong>. I want to use some API.</li><li><strong>Curiosity</strong>. Just looking at how other APIs are done.</li><li><strong>Assessment</strong>. I need to check APIs for certain characteristics.</li></ul><p>There are many ways to perform exploration, countless tools and sources to use. In this article I&rsquo;ll be looking only at OpenAPI description documents, because that&rsquo;s where <code>openapi-cli</code> comes handy.</p><div class="admonition note"><div class=admonition-icon><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg></div><p>When exploring unknown APIs, I run a globally installed package: <code>npm i -g @redocly/openapi-cli</code>. Then it is accessible in the terminal as <code>openapi &lt;args></code>.</p></div><div class="relative header-wrapper"><h2 id=openapi-stats><a href=#openapi-stats class=header-link><svg xmlns="http://www.w3.org/2000/svg" style="display:inline-block;vertical-align:middle" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a><code>openapi stats</code></h2></div><p>Gathers some basic statistics for an OpenAPI description document. Can be in &ldquo;stylish&rdquo; format (as in the example below) or in JSON.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>➜ openapi stats http://localhost:8888/api/v1/swagger.json
Document: http://localhost:8888/api/v1/swagger.json stats:

🚗 References: 12 
📦 External Documents: 0 
📈 Schemas: 12 
👉 Parameters: 9 
🔗 Links: 0 
➡️ Path Items: 4 
👷 Operations: 7 
🔖 Tags: 1 
</code></pre></div><p>Nothing useful for me at the moment. The only use case that comes to mind is when you have a bunch of documents for an <strong>assessment</strong> and you&rsquo;re not sure where to start. Then, you can check stats for each doc and proceed with the smallest one.</p><div class="relative header-wrapper"><h2 id=openapi-preview-docs><a href=#openapi-preview-docs class=header-link><svg xmlns="http://www.w3.org/2000/svg" style="display:inline-block;vertical-align:middle" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a><code>openapi preview-docs</code></h2></div><p>This command is the primary reason I have <code>openapi-cli</code> installed as a global package: I use it all the time. The command accepts path or link to the existing OpenAPI description document and starts a local HTTP server with the generated Redoc reference doc.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>➜ openapi preview-docs  http://localhost/api/v1/swagger.json
Using Redoc community edition.
Login with openapi-cli login or use an enterprise license key to preview with the premium docs.


🔎  Preview server running at http://127.0.0.1:8080

👀  Watching http://localhost/api/v1/swagger.json and all related resources for changes


Bundling...

Created a bundle for http://localhost/api/v1/swagger.json successfully
</code></pre></div><p>Why you&rsquo;d want that?</p><p>First, sometimes there is just an OpenAPI description document and nothing else. No documentation whatsoever. Rare, but I do stumble upon this with internal APIs.</p><p>The second reason is when there are some reference docs, but they don&rsquo;t fit you.</p><p>For example, it&rsquo;s a SwaggerUI, and you don&rsquo;t like it, or the description doc has advanced features like <code>oneOf</code> or <code>discriminator</code>. In such case, SwaggerUI cannot generate fancy form-based presentation, so you have to read bare model definitions.</p><p>Or perhaps you have special needs. Lorna Jane Mitchell in her presentation on <a href=https://lornajane.net/resource/delightful-sdks-with-openapi class=external>Delightful SDKs</a> mentions that she often generates her own local reference docs because official documentations aren&rsquo;t <em>accessible</em>. AFAIK, she uses Redoc and made several pull requests specifically for better accessibility support.</p><div class="admonition note"><div class=admonition-icon><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg></div><p>You can generate reference docs with <a href=https://www.npmjs.com/package/redoc-cli class=external><code>redoc-cli</code></a>, but I prefer using <code>openapi-cli</code> as a one-stop shop. The difference is when you want to generate static HTML with your theme: right now you have to use a small hack <a href=https://github.com/Redocly/openapi-cli/issues/133 class=external>from this issue</a>.</p></div><div class="relative header-wrapper"><h2 id=openapi-split><a href=#openapi-split class=header-link><svg xmlns="http://www.w3.org/2000/svg" style="display:inline-block;vertical-align:middle" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a><code>openapi split</code></h2></div><p>Reading a big OpenAPI description doc is cumbersome. Especially when you need to jump back and forth between references.</p><p>Split for the rescue! It&rsquo;s an opposite of the <a href=https://www.aviskase.com/articles/2020/12/07/crash-course-into-api-related-terminology/#ref class=internal>bundling operation</a> and separates references into several files. Though, it&rsquo;s a bit smarter; for example, it splits paths into separate files too.</p><div class="admonition warning"><div class=admonition-icon><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg></div><p class=admonition-title>Warning</p><p>This command doesn&rsquo;t support OpenAPI 2.</p></div><p>Let&rsquo;s split a description doc into <code>out</code> directory: <code>openapi split --outDir out openapi.json</code>. Here is a sample result:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>~/out 
➜ tree
.
├── components
│   ├── parameters
│   │   ├── pageNumber.yaml
│   │   ├── pageSize.yaml
│   │   └── resourceId.yaml
│   ├── requestBodies
│   │   ├── User.yaml
│   ├── responses
│   │   ├── Error.yaml
│   │   ├── Forbidden.yaml
│   │   ├── Ok.yaml
│   │   └── Unauthorized.yaml
│   └── schemas
│       ├── Id.yaml
│       ├── ResourceId.yaml
│       ├── UserCollection.yaml
│       └── User.yaml
├── openapi.yaml
└── paths
    ├── users@{id}.yaml
    └── users.yaml
</code></pre></div><p>Another reason to use split is when you&rsquo;re not just exploring API, but you plan to work on it. For example, when you&rsquo;re switching from annotations-driven to handcrafted approach; <em>split creates a good starting point for refactoring</em>.</p><div class="relative header-wrapper"><h2 id=openapi-lint><a href=#openapi-lint class=header-link><svg xmlns="http://www.w3.org/2000/svg" style="display:inline-block;vertical-align:middle" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"/></svg></a><code>openapi lint</code></h2></div><p>You may want to do <a href=https://www.aviskase.com/articles/2020/12/07/crash-course-into-api-related-terminology/#description-doc-validation-vs-linting-vs-preprocessing class=internal>linting</a> in <strong>assessment</strong> or <strong>curiosity</strong> contexts:</p><ul><li>Assessment:<ul><li>Is this old API at least valid per OpenAPI standard or it&rsquo;s complete garbage?</li><li>We came up with new API guidelines. Do our existing APIs conform to it? How many don&rsquo;t?</li></ul></li><li>Curiosity:<ul><li>I wonder how many APIs out there follow this rule? Is it common and should we apply it in our API?</li></ul></li></ul><p>As you can see, the biggest benefits of <code>openapi lint</code> come when you use custom rules and configurations. This topic I&rsquo;ll be covering in later articles, stay tuned.</p><hr><p>If you want to read more about OpenAPI-based API exploration, I recommend <a href=https://apihandyman.io/api-toolbox-jq-and-openapi-part-1-using-jq-to-extract-data-from-openapi-files/ class=external>Arnaud Lauret&rsquo;s series of articles about <code>jq</code></a>.</p></article><div class=page-navigation><a class=prev href=https://www.aviskase.com/articles/2020/12/30/hmms-2020/ title="Hmms: 2020"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 17l-5-5 5-5m7 10-5-5 5-5"/></svg>older</a></div></main><footer class="justify-center flex w-full py-4 text-16"><a class="border-b-2 border-transparent hover:border-primary" href=mailto:aviskase@gmail.com>Yuliya Bagriy</a><span> &#183; 2021 &#183; </span><a class="border-b-2 border-transparent hover:border-primary" href=https://www.aviskase.com/pages/i-dont-track-you/>No tracking</a></footer></div></body></html>