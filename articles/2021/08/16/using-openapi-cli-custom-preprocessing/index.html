<!doctype html><html lang=en prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#"><head><base href=https://www.aviskase.com/articles/2021/08/16/using-openapi-cli-custom-preprocessing/><title>Using openapi-cli: custom preprocessing | aviskase</title>
<meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta property="og:title" content="Using openapi-cli: custom preprocessing"><meta property="og:description" content="The key feature of openapi-cli is its extensibility. There are three ways to extend it: preprocessors, rules, and decorators. In comparison, Spectral supports only custom rules.
In this tutorial, we&rsquo;ll start with preprocessors. They are used to transform OpenAPI description document before validation and linting. Mind you, documentation says they should be avoided, because custom preprocessors tend to be error prone."><meta name=description content="The key feature of openapi-cli is its extensibility. There are three ways to extend it: preprocessors, rules, and decorators. In comparison, Spectral supports only custom rules.
In this tutorial, we&rsquo;ll start with preprocessors. They are used to transform OpenAPI description document before validation and linting. Mind you, documentation says they should be avoided, because custom preprocessors tend to be error prone."><meta property="og:url" content="https://www.aviskase.com/articles/2021/08/16/using-openapi-cli-custom-preprocessing/"><link rel=canonical href=https://www.aviskase.com/articles/2021/08/16/using-openapi-cli-custom-preprocessing/><meta property="og:type" content="article"><meta property="og:image" content="https://www.aviskase.com/articles/2021/08/16/using-openapi-cli-custom-preprocessing/feature.png"><meta property="og:image:height" content="630"><meta property="og:image:width" content="1200"><meta property="article:published_time" content="2021-08-16T23:44:37-04:00"><meta property="article:modified_time" content="2021-08-16T23:44:37-04:00"><meta property="og:site_name" content="aviskase"><meta property="article:author" content="https://www.aviskase.com/pages/about/"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.aviskase.com/articles/2021/08/16/using-openapi-cli-custom-preprocessing/feature.png"><meta name=twitter:title content="Using `openapi-cli`: custom preprocessing"><meta name=twitter:description content="The key feature of openapi-cli is its extensibility. There are three ways to extend it: preprocessors, rules, and decorators. In comparison, Spectral supports only custom rules.
In this tutorial, we&rsquo;ll start with preprocessors. They are used to transform OpenAPI description document before validation and linting. Mind you, documentation says they should be avoided, because custom preprocessors tend to be error prone."><meta name=twitter:site content="@aviskase"><meta name=generator content="Hugo 0.121.1"><link rel=stylesheet href="/css/main.min.290c42c89f7298f78d633167d5649ccef463978b956cb1d06d8ed9c27f4e8cf7.css" integrity="sha256-KQxCyJ9ymPeNYzFn1WSczvRjl4uVbLHQbY7Zwn9OjPc="><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest></head><body class="selection:bg-blue-500 selection:text-white bg-white text-slate-950 font-sans text-[1.8rem] leading-[1.77]"><div class="min-h-screen grid grid-rows-mainLayout"><header><nav class="bg-gradient-to-b from-blue-800 to-sky-600 relative lowercase"><div class="pb-12 pt-6 max-w-normal flex flex-wrap items-center normal:items-baseline justify-between mx-6 normal:mx-auto"><a class="text-amber-300 font-bold text-24" href=/>aviskase</a>
<input id=nav-toggle type=checkbox class="hidden peer/nav">
<label id=show-button for=nav-toggle class="flex items-center normal:hidden peer-checked/nav:hidden"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" class="w-12 h-12 stroke-amber-300"><title>Menu Open</title><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"/></svg></label><label id=hide-button for=nav-toggle class="items-center hidden peer-checked/nav:flex"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" class="w-12 h-12 stroke-amber-300"><title>Menu Close</title><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/></svg></label><ul id=nav-menu class="font-semibold text-16 text-white hidden peer-checked/nav:block normal:flex mt-3 normal:mt-0 space-y-3 normal:space-y-0 normal:space-x-4.5 w-full normal:w-auto"><li><a href=/>Home</a></li><li><a href=/pages/about/>About</a></li><li><a href=/pages/archive/>Archive</a></li><li><a href=/feeds/all.atom.xml>RSS</a></li></ul></div><div class="absolute bottom-0 left-0 w-full overflow-hidden leading-[0] rotate-180"><svg class="relative block h-[37px] w-[calc(198%_+_1.3px)] [&>*]:fill-white" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none"><path d="M0 0V46.29c47.79 22.2 103.59 32.17 158 28 70.36-5.37 136.33-33.31 206.8-37.5C438.64 32.43 512.34 53.67 583 72.05c69.27 18 138.3 24.88 209.4 13.08 36.15-6 69.85-17.84 104.45-29.34C989.49 25 1113-14.29 12e2 52.47V0z" opacity=".25" class=""/><path d="M0 0V15.81C13 36.92 27.64 56.86 47.69 72.05 99.41 111.27 165 111 224.58 91.58c31.15-10.15 60.09-26.07 89.67-39.8 40.92-19 84.73-46 130.83-49.67 36.26-2.85 70.9 9.42 98.6 31.56 31.77 25.39 62.32 62 103.63 73 40.44 10.79 81.35-6.69 119.13-24.28s75.16-39 116.92-43.05c59.73-5.85 113.28 22.88 168.9 38.84 30.2 8.66 59 6.17 87.09-7.5 22.43-10.89 48-26.93 60.65-49.24V0z" opacity=".5" class=""/><path d="M0 0V5.63C149.93 59 314.09 71.32 475.83 42.57c43-7.64 84.23-20.12 127.61-26.46 59-8.63 112.48 12.24 165.56 35.4C827.93 77.22 886 95.24 951.2 90c86.53-7 172.46-45.71 248.8-84.81V0z" class=""/></svg></div></nav></header><main><div class=title-hero><h1>Using <code>openapi-cli</code>: custom preprocessing</h1><div class=article-meta><div class=normal:justify-self-end>16 Aug 2021</div><div class="hidden normal:block">&nbsp;â€”&nbsp;</div><div class="relative normal:justify-self-start"><svg class="inline relative" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg><span>&nbsp;4&nbsp;mins</span></div></div></div><article><p>The key feature of <code>openapi-cli</code> is its extensibility. There are three ways to extend it: <a href=https://redoc.ly/docs/cli/custom-rules/ class="no-underline bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.2rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">preprocessors, rules, and decorators</a>. In comparison, <a href=https://meta.stoplight.io/docs/spectral class="no-underline bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.2rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">Spectral</a> supports only custom rules.</p><p>In this tutorial, we&rsquo;ll start with <strong>preprocessors</strong>. They are used to transform OpenAPI description document <em>before</em> validation and linting. Mind you, documentation says they should be avoided, because custom preprocessors tend to be error prone.</p><div class="relative group/header"><h2 id=example-extensible-enumerations><a href=#example-extensible-enumerations class="hidden pointer-events-none header-link focus:opacity-75 group-hover/header:opacity-75 normal:text-inherit normal:block normal:absolute normal:opacity-0 normal:left-0 normal:text-[0.75em] normal:translate-x-[-125%] normal:translate-y-[-2px] normal:scroll-mt-[128px] normal:transition-opacity normal:duration-300"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="w-[1em] h-[1em] pointer-events-auto opacity-100 inline-block align-middle"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a>Example: extensible enumerations</h2></div><p>In our Stargate Network API there is a <a href=https://github.com/aviskase/openapi-cli-examples/blob/bb95d479cc184221b38ff5d5371767f0b3f32f74/openapi/components/schemas/Stargate.yaml class="no-underline bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.2rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]"><code>Stargate.yaml</code> schema</a> with two properties defined with enumerations: <code>state</code> and <code>environment</code>. We might think that we captured all potential values, but we can&rsquo;t be sure.</p><p><a href=https://opensource.zalando.com/restful-api-guidelines/#112 class="no-underline bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.2rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">Zalando API guidelines</a> and <a href=https://livebook.manning.com/book/the-design-of-web-apis/chapter-9/table9.1 class="no-underline bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.2rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">The Design of Web APIs by Arnaud Lauret</a> warn us that enumerations can cause API compatibility breaks, especially with outputs.</p><p>Imagine the scenario. We generated SDK for the initial version of the API, and the generator was smart enough to use enumerations in the selected programming language. Some time later we push a new API version where <code>environment</code> can also be <code>STAR</code>. Customers, who are still on the first version of the SDK, won&rsquo;t be able to process API responses containing this value, because most probably their clients will crash with something-something-uprocessable-entity exceptions.</p><p>Thus, similarly to Zalando, we will use a custom <a href=https://spec.openapis.org/oas/v3.0.3.html#specification-extensions class="no-underline bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.2rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">vendor extension</a> to document possible values. I&rsquo;m calling it <code>x-aviskase-enum</code> just in case not to introduce conflicts with other extensions. <a href=https://github.com/aviskase/openapi-cli-examples/tree/fa78766d7ea2cd245740373efb951bffe7b2facf class="no-underline bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.2rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">Commit fa78766</a>.</p><div class="relative group/header"><h2 id=surfacing-values-in-the-documentation><a href=#surfacing-values-in-the-documentation class="hidden pointer-events-none header-link focus:opacity-75 group-hover/header:opacity-75 normal:text-inherit normal:block normal:absolute normal:opacity-0 normal:left-0 normal:text-[0.75em] normal:translate-x-[-125%] normal:translate-y-[-2px] normal:scroll-mt-[128px] normal:transition-opacity normal:duration-300"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="w-[1em] h-[1em] pointer-events-auto opacity-100 inline-block align-middle"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a>Surfacing values in the documentation</h2></div><p>Oops, now there is no way to see known values in the generated reference docs. The manual fix is to add these values to the <code>description</code>. But this is too cumbersome, especially if you&rsquo;ll ever want to change presentation format.</p><p>Preprocessor for the rescue! What we want it to do:</p><ol><li>Find all properties with <code>x-aviskase-enum</code> property.</li><li>Grab the list of values, format them nicely, and add it to the <code>description</code>. Make sure not to overwrite existing description if it&rsquo;s already present!</li></ol><div class="relative group/header"><h3 id=adding-a-preprocessor><a href=#adding-a-preprocessor class="hidden pointer-events-none header-link focus:opacity-75 group-hover/header:opacity-75 normal:text-inherit normal:block normal:absolute normal:opacity-0 normal:left-0 normal:text-[0.75em] normal:translate-x-[-125%] normal:translate-y-[-2px] normal:scroll-mt-[128px] normal:transition-opacity normal:duration-300"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="w-[1em] h-[1em] pointer-events-auto opacity-100 inline-block align-middle"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a>Adding a preprocessor</h3></div><p>Let&rsquo;s create a preprocessor first <code>./plugins/preprocessors/add-enum-to-description.js</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#6272a4>//@ts-check
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span>module.exports <span style=color:#ff79c6>=</span> AddEnumToDescription;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4>/** @type { import(&#39;@redocly/openapi-core/src/visitors&#39;).Oas3Preprocessor } */</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>function</span> AddEnumToDescription(options) {
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>const</span> vendorExtension <span style=color:#ff79c6>=</span> options.vendorExtension <span style=color:#ff79c6>||</span> <span style=color:#f1fa8c>&#39;x-enum&#39;</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>return</span> {
</span></span><span style=display:flex><span>    Schema(schema) {
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>if</span> (schema[vendorExtension]) {
</span></span><span style=display:flex><span>        schema.description <span style=color:#ff79c6>=</span> appendToDescription(schema[vendorExtension], schema.description);
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8be9fd;font-style:italic>function</span> appendToDescription(values, description) {
</span></span><span style=display:flex><span>  <span style=color:#8be9fd;font-style:italic>let</span> additionalDescription <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>`Possible values: </span><span style=color:#f1fa8c>${</span>values.map(v =&gt; <span style=color:#f1fa8c>`\`</span><span style=color:#f1fa8c>${</span>v<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c>\``</span>).join(<span style=color:#f1fa8c>&#39;, &#39;</span>)<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c>`</span>;
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>if</span> (description) {
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>return</span> <span style=color:#f1fa8c>`</span><span style=color:#f1fa8c>${</span>description<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c>\n\n</span><span style=color:#f1fa8c>${</span>additionalDescription<span style=color:#f1fa8c>}</span><span style=color:#f1fa8c>`</span>;
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>return</span> additionalDescription;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>What&rsquo;s happening here:</p><ul><li>We export a preprocessor function <code>AddEnumToDescription</code> that accepts configuration <code>options</code>:<ul><li><code>vendorExtension</code> option is used to define extension name for extensible enumeration. If not provided, it equals to <code>x-enum</code>.</li></ul></li><li>All <code>openapi-cli</code> preprocessors should return a <em>visitor</em>. In our case, we specifically indicate to take into account only schema nodes.</li><li>If a schema has defined extensible enumeration property, we update its description with formatted list of values.</li></ul><div class="admonition warning"><div class=admonition-icon><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg></div><p>Per documentation, for type support you can use <code>import('@redocly/openapi-cli').Oas3Preprocessor}</code>. It never worked for me, so I use a &ldquo;full path&rdquo; <code>import('@redocly/openapi-core/src/visitors').Oas3Preprocessor</code>.</p></div><div class="relative group/header"><h3 id=enabling-our-preprocessor-via-custom-plugin><a href=#enabling-our-preprocessor-via-custom-plugin class="hidden pointer-events-none header-link focus:opacity-75 group-hover/header:opacity-75 normal:text-inherit normal:block normal:absolute normal:opacity-0 normal:left-0 normal:text-[0.75em] normal:translate-x-[-125%] normal:translate-y-[-2px] normal:scroll-mt-[128px] normal:transition-opacity normal:duration-300"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="w-[1em] h-[1em] pointer-events-auto opacity-100 inline-block align-middle"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a>Enabling our preprocessor via custom plugin</h3></div><p>Let&rsquo;s keep our preprocessor (and the future ones) bundled inside one plugin via <code>./plugins/custom-preprocessors.js</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#6272a4>//@ts-check
</span></span></span><span style=display:flex><span><span style=color:#6272a4></span><span style=color:#ff79c6>const</span> AddEnumToDescription <span style=color:#ff79c6>=</span> require(<span style=color:#f1fa8c>&#39;./preprocessors/add-enum-to-description&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#ff79c6>const</span> id <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;custom-preprocessors&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6272a4>/** @type { import(&#39;@redocly/openapi-core/src/config/config&#39;).PreprocessorsConfig } */</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>const</span> preprocessors <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>  oas3<span style=color:#ff79c6>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#f1fa8c>&#39;add-x-enum-to-description&#39;</span><span style=color:#ff79c6>:</span> AddEnumToDescription,
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>module.exports <span style=color:#ff79c6>=</span> {
</span></span><span style=display:flex><span>  id,
</span></span><span style=display:flex><span>  preprocessors,
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Here we defined plugin&rsquo;s <code>id</code> and a mapping between preprocessor&rsquo;s name (<code>add-x-enum-to-description</code>) and its implementation.</p><p>Then we need to add this custom plugin to the <code>.redocly.yaml</code> and to enable the preprocessor:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#ff79c6>lint</span>:
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>plugins</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f1fa8c>&#39;./plugins/custom-preprocessors.js&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>preprocessors</span>:
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>custom-preprocessors/add-x-enum-to-description</span>:
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>vendorExtension</span>: x-aviskase-enum
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>The final result is in <a href=https://github.com/aviskase/openapi-cli-examples/tree/665492641fa119292d2ef7aa2c6bd4a87266ff9b class="no-underline bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.2rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">commit 6654926</a>.</p><div class="relative group/header"><h2 id=how-it-looks-in-the-docs><a href=#how-it-looks-in-the-docs class="hidden pointer-events-none header-link focus:opacity-75 group-hover/header:opacity-75 normal:text-inherit normal:block normal:absolute normal:opacity-0 normal:left-0 normal:text-[0.75em] normal:translate-x-[-125%] normal:translate-y-[-2px] normal:scroll-mt-[128px] normal:transition-opacity normal:duration-300"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="w-[1em] h-[1em] pointer-events-auto opacity-100 inline-block align-middle"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a>How it looks in the docs</h2></div><p>Now, when we render a reference documentation, we can see all values with simple markdown formatting.</p><p><figure class=my-[3.2rem]><picture class=my-0><source srcset=https://www.aviskase.com/articles/2021/08/16/using-openapi-cli-custom-preprocessing/x_enum_render_hu0c23a21c68146543c289aaa72aeaae18_43182_1445x324_resize_q75_h2_box_3.webp type=image/webp><img class="my-[3.2rem] mx-auto rounded" src=https://www.aviskase.com/articles/2021/08/16/using-openapi-cli-custom-preprocessing/x_enum_render.png alt="Redoc with modified descriptions for extensible enumerations" defer></picture></figure></p><div class="admonition cta"><div class=admonition-icon><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" viewBox="0 0 24 24" stroke="currentcolor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636-.707.707M21 12h-1M4 12H3m3.343-5.657-.707-.707m2.828 9.9a5 5 0 117.072.0l-.548.547A3.374 3.374.0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/></svg></div><p>By the way, can you spot operations where we could have left normal <code>enum</code> and why?</p></div><div class="relative group/header"><h2 id=why-use-a-preprocessor-here><a href=#why-use-a-preprocessor-here class="hidden pointer-events-none header-link focus:opacity-75 group-hover/header:opacity-75 normal:text-inherit normal:block normal:absolute normal:opacity-0 normal:left-0 normal:text-[0.75em] normal:translate-x-[-125%] normal:translate-y-[-2px] normal:scroll-mt-[128px] normal:transition-opacity normal:duration-300"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="w-[1em] h-[1em] pointer-events-auto opacity-100 inline-block align-middle"><path stroke-linecap="round" stroke-linejoin="round" d="M13.19 8.688a4.5 4.5.0 011.242 7.244l-4.5 4.5a4.5 4.5.0 01-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5.0 00-6.364-6.364l-4.5 4.5a4.5 4.5.0 001.242 7.244"/></svg></a>Why use a preprocessor here?</h2></div><p>As mentioned before, preprocessors might be brittle. We could have used decorator instead. I&rsquo;ll show you the reason in the next article, but here is a sneak peek: we want to be able to <a href=https://www.aviskase.com/articles/2021/09/06/using-openapi-cli-custom-rules/ class="transition-colors duration-300 before:content-['[['] after:content-[']]'] hover:text-blue-500 focus:text-blue-500 before:text-blue-500 after:text-blue-500 before:text-[1.05em] after:text-[1.05em]"><em>lint</em> modified descriptions</a>!</p></article><div class=page-navigation><a class=prev href=https://www.aviskase.com/articles/2021/03/23/using-openapi-cli-during-api-design-part-two/ title="Using openapi-cli during API design: part two"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 17l-5-5 5-5m7 10-5-5 5-5"/></svg>older</a>
<span class=separator>&nbsp; &#183; &nbsp; &#183; &nbsp; &#183; &nbsp;</span>
<a class=next href=https://www.aviskase.com/articles/2021/09/06/using-openapi-cli-custom-rules/ title="Using openapi-cli: custom rules">newer<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 17l5-5-5-5M6 17l5-5-5-5"/></svg></a></div></main><footer class="justify-center flex w-full pt-6 pb-4 text-16 bg-amber-300 mt-12"><a class="border-b-2 border-transparent hover:border-blue-500" href=mailto:aviskase@gmail.com>Yuliya Bagriy</a><span>&nbsp;&#183;&nbsp;2023&nbsp;&#183;&nbsp;</span><a class="border-b-2 border-transparent hover:border-blue-500" href=https://www.aviskase.com/pages/i-dont-track-you/>No tracking</a></footer></div></body></html>