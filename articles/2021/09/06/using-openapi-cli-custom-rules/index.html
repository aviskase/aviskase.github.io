<!doctype html><html lang=en prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#"><head><base href=https://www.aviskase.com/articles/2021/09/06/using-openapi-cli-custom-rules/><title>Using openapi-cli: custom rules | aviskase</title>
<meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta property="og:title" content="Using openapi-cli: custom rules"><meta name=twitter:title content="Using openapi-cli: custom rules"><meta property="og:description" content="If you&rsquo;re planning to lint OpenAPI description documents (you should!), always check whether a linter supports adding custom rules. And I mean not just changing severity or disabling predefined rules, but actually adding new ones specific to your API standards.
openapi-cli, as any respectable OpenAPI linter, allows that. The process is very similar to adding preprocessors."><meta property="twitter:description" content="If you&rsquo;re planning to lint OpenAPI description documents (you should!), always check whether a linter supports adding custom rules. And I mean not just changing severity or disabling predefined rules, but actually adding new ones specific to your API standards.
openapi-cli, as any respectable OpenAPI linter, allows that. The process is very similar to adding preprocessors."><meta name=description content="If you&rsquo;re planning to lint OpenAPI description documents (you should!), always check whether a linter supports adding custom rules. And I mean not just changing severity or disabling predefined rules, but actually adding new ones specific to your API standards.
openapi-cli, as any respectable OpenAPI linter, allows that. The process is very similar to adding preprocessors."><meta property="og:url" content="https://www.aviskase.com/articles/2021/09/06/using-openapi-cli-custom-rules/"><link rel=canonical href=https://www.aviskase.com/articles/2021/09/06/using-openapi-cli-custom-rules/><meta property="og:type" content="article"><meta property="article:published_time" content="2021-09-06T16:35:43-04:00"><meta property="article:modified_time" content="2021-09-06T16:35:43-04:00"><meta property="og:site_name" content="aviskase"><meta property="article:author" content="https://www.aviskase.com/pages/about/"><meta name=twitter:card content="summary"><meta name=twitter:creator content="@aviskase"><link rel=me href=https://infosec.exchange/@aviskase><meta name=fediverse:creator content="@aviskase@infosec.exchange"><meta name=generator content="Hugo 0.147.1"><link rel=stylesheet href=/css/main.min.b63568c3305c9881a652d576d84e653067af3f52f79a9a4303ea2c5ea74cf65d.css integrity="sha256-tjVowzBcmIGmUtV22E5lMGevP1L3mppDA+osXqdM9l0="><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest></head><body><header><a href=/ class=title>aviskase</a><p><a href=/>Home</a>
<a href=/pages/about/>About</a>
<a href=/pages/archive/>Archive</a>
<a href=/feeds/all.atom.xml>RSS</a></p></header><main><div class=title><h1>Using <code>openapi-cli</code>: custom rules</h1></div><table class=article-props><tr><th class=width-min>published</th><td class=width-auto>2021-09-06</td></tr><tr><th class=width-min>reading&nbsp;time</th><td class=width-auto>4&nbsp;mins</td></tr><tr><th class=width-min>categories</th><td class=width-auto><a href=/categories/it/>it</a></td></tr></table><article><p>If you&rsquo;re planning to <a href=https://www.aviskase.com/articles/2020/12/07/crash-course-into-api-related-terminology/#description-doc-validation-vs-linting-vs-preprocessing class=internal-link>lint OpenAPI description documents</a> (you should!), always check whether a linter supports adding custom rules. And I mean not just <a href=https://www.aviskase.com/articles/2019/12/26/lunchlearn-linting-openapi-description-docs/ class=internal-link>changing severity or disabling predefined rules</a>, but actually adding new ones specific to your API standards.</p><p><code>openapi-cli</code>, as any respectable OpenAPI linter, <a href=https://redoc.ly/docs/cli/custom-rules/ class=external-link>allows that</a>. The process is very similar to <a href=https://www.aviskase.com/articles/2021/08/16/using-openapi-cli-custom-preprocessing/ class=internal-link>adding preprocessors</a>.</p><h2 id=example-enforcing-case-style><a href=#example-enforcing-case-style>Example: enforcing case style</a></h2><p>Let&rsquo;s look at our previous enumeration example:</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#cba6f7>state</span>:
</span></span><span style=display:flex><span>	<span style=color:#cba6f7>type</span>: string
</span></span><span style=display:flex><span>	<span style=color:#cba6f7>nullable</span>: <span style=color:#fab387>true</span>
</span></span><span style=display:flex><span>	<span style=color:#cba6f7>x-aviskase-enum</span>:
</span></span><span style=display:flex><span>	  - OK
</span></span><span style=display:flex><span>	  - DESTROYED
</span></span><span style=display:flex><span>	  - BURIED
</span></span></code></pre></div><p>Typically, there are guidelines for case style of enumeration values. Imagine that our rule is: all values in enumerations and extensible enumerations MUST be <code>CAPITAL_CASE</code>.</p><h3 id=adding-a-rule><a href=#adding-a-rule>Adding a rule</a></h3><p>First, here is our rule file <code>./plugins/rules/uppercase-schema-enums.js</code>:</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#6c7086;font-style:italic>//@ts-check
</span></span></span><span style=display:flex><span><span style=color:#6c7086;font-style:italic></span>module.exports <span style=color:#89dceb;font-weight:700>=</span> UppercaseSchemaEnums;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6c7086;font-style:italic>/** @type { import(&#39;@redocly/openapi-core/src/visitors&#39;).Oas3Rule } */</span>
</span></span><span style=display:flex><span><span style=color:#f38ba8>function</span> UppercaseSchemaEnums(options) {
</span></span><span style=display:flex><span>  <span style=color:#cba6f7>const</span> enumProperties <span style=color:#89dceb;font-weight:700>=</span> [<span style=color:#a6e3a1>&#39;enum&#39;</span>, ...(options.enumLikeProperties <span style=color:#89dceb;font-weight:700>||</span> [])];
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#cba6f7>return</span> {
</span></span><span style=display:flex><span>    Schema<span style=color:#89dceb;font-weight:700>:</span> {
</span></span><span style=display:flex><span>      skip(node) {
</span></span><span style=display:flex><span>        <span style=color:#cba6f7>return</span> node.type <span style=color:#89dceb;font-weight:700>!==</span> <span style=color:#a6e3a1>&#39;string&#39;</span>;
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      enter(node, { report, location }) {
</span></span><span style=display:flex><span>        <span style=color:#cba6f7>for</span> (<span style=color:#cba6f7>const</span> prop <span style=color:#cba6f7>of</span> enumProperties) {
</span></span><span style=display:flex><span>          <span style=color:#cba6f7>if</span> (node[prop] <span style=color:#89dceb;font-weight:700>!==</span> <span style=color:#fab387>undefined</span>) {
</span></span><span style=display:flex><span>            <span style=color:#cba6f7>if</span> (node[prop].some(s =&gt; s <span style=color:#89dceb;font-weight:700>!==</span> s.toUpperCase())) {
</span></span><span style=display:flex><span>              <span style=color:#cba6f7>return</span> report({ message<span style=color:#89dceb;font-weight:700>:</span> <span style=color:#a6e3a1>`All enum values should be uppercase`</span>, location<span style=color:#89dceb;font-weight:700>:</span> location.child(prop) });
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>          }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  };  
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li>Export a rule function <code>UppercaseSchemaEnums</code> that can be configured with enumeration-like properties in addition to the standard <code>enum</code>.</li><li>All rules (like preprocessors) should return a <em>visitor</em>. We use <code>Schema</code> visitor with two methods:<ul><li><code>skip</code> method to ensure that we check enumerations only for properties with <code>type: string</code></li><li>normal <code>enter</code> method to check the rule</li></ul></li><li>To report a problem we use the second argument of <code>enter</code> method: context. It&rsquo;s <a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment class=external-link>destructured</a> to <code>report</code> and <code>location</code>:<ul><li><code>report</code> is a function to report a problem (duh!)</li><li><code>location</code> has several properties and methods, in our example we use <code>location.child()</code> to ask reporter to pinpoint the problem to the node&rsquo;s child location. Thus, the problem will be pointed to <code>state.x-aviskase-enum</code> instead of simply <code>state</code>.</li></ul></li></ul><h3 id=enabling-the-rule-via-a-custom-plugin><a href=#enabling-the-rule-via-a-custom-plugin>Enabling the rule via a custom plugin</a></h3><p>Similarly to the preprocessor plugin, we keep all custom rules bundled as a plugin in <code>./plugins/custom-rules.js</code>:</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#6c7086;font-style:italic>//@ts-check
</span></span></span><span style=display:flex><span><span style=color:#6c7086;font-style:italic></span><span style=color:#cba6f7>const</span> UppercaseSchemaEnums <span style=color:#89dceb;font-weight:700>=</span> require(<span style=color:#a6e3a1>&#39;./rules/uppercase-schema-enums&#39;</span>);
</span></span><span style=display:flex><span><span style=color:#cba6f7>const</span> id <span style=color:#89dceb;font-weight:700>=</span> <span style=color:#a6e3a1>&#39;custom-rules&#39;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6c7086;font-style:italic>/** @type { import(&#39;@redocly/openapi-core/src/config/config&#39;).CustomRulesConfig } */</span>
</span></span><span style=display:flex><span><span style=color:#cba6f7>const</span> rules <span style=color:#89dceb;font-weight:700>=</span> {
</span></span><span style=display:flex><span>  oas3<span style=color:#89dceb;font-weight:700>:</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e3a1>&#39;uppercase-schema-enums&#39;</span><span style=color:#89dceb;font-weight:700>:</span> UppercaseSchemaEnums,
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>module.exports <span style=color:#89dceb;font-weight:700>=</span> {
</span></span><span style=display:flex><span>  id,
</span></span><span style=display:flex><span>  rules,
</span></span><span style=display:flex><span>};
</span></span></code></pre></div><p>Next, enable the plugin and configure the rule in the <code>.redocly.yaml</code> file:</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#fab387>...</span>
</span></span><span style=display:flex><span>  <span style=color:#cba6f7>plugins</span>:
</span></span><span style=display:flex><span>    - <span style=color:#a6e3a1>&#39;./plugins/custom-preprocessors.js&#39;</span>
</span></span><span style=display:flex><span>    - <span style=color:#a6e3a1>&#39;./plugins/custom-rules.js&#39;</span>
</span></span><span style=display:flex><span><span style=color:#fab387>...</span>
</span></span><span style=display:flex><span>  <span style=color:#cba6f7>rules</span>:
</span></span><span style=display:flex><span>    <span style=color:#cba6f7>custom-rules/uppercase-schema-enums</span>:
</span></span><span style=display:flex><span>      <span style=color:#cba6f7>severity</span>: error
</span></span><span style=display:flex><span>      <span style=color:#cba6f7>enumLikeProperties</span>:
</span></span><span style=display:flex><span>        - x-aviskase-enum
</span></span><span style=display:flex><span><span style=color:#fab387>...</span>
</span></span></code></pre></div><p>The final result is in <a href=https://github.com/aviskase/openapi-cli-examples/tree/45a99c7f3cfa8e1725ebccc601280f948c637910 class=external-link>commit 45a99c7</a>.</p><h2 id=example-checking-description-property-style><a href=#example-checking-description-property-style>Example: checking <code>description</code> property style</a></h2><p>Let&rsquo;s add one more housekeeping rule: all <code>description</code> properties should start with a capital letter and end with a punctuation mark.</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#6c7086;font-style:italic>//@ts-check
</span></span></span><span style=display:flex><span><span style=color:#6c7086;font-style:italic></span>module.exports <span style=color:#89dceb;font-weight:700>=</span> DescriptionStyle;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#6c7086;font-style:italic>/** @type { import(&#39;@redocly/openapi-core/src/visitors&#39;).Oas3Rule } */</span>
</span></span><span style=display:flex><span><span style=color:#f38ba8>function</span> DescriptionStyle() {
</span></span><span style=display:flex><span>  <span style=color:#cba6f7>return</span> {
</span></span><span style=display:flex><span>    Info<span style=color:#89dceb;font-weight:700>:</span> checkStyle(),
</span></span><span style=display:flex><span>    Server<span style=color:#89dceb;font-weight:700>:</span> checkStyle(), 
</span></span><span style=display:flex><span>    ServerVariable<span style=color:#89dceb;font-weight:700>:</span> checkStyle(),
</span></span><span style=display:flex><span>    PathItem<span style=color:#89dceb;font-weight:700>:</span> checkStyle(),
</span></span><span style=display:flex><span>    Operation<span style=color:#89dceb;font-weight:700>:</span> checkStyle(), 
</span></span><span style=display:flex><span>    ExternalDocs<span style=color:#89dceb;font-weight:700>:</span> checkStyle(),
</span></span><span style=display:flex><span>    Parameter<span style=color:#89dceb;font-weight:700>:</span> checkStyle(),
</span></span><span style=display:flex><span>    RequestBody<span style=color:#89dceb;font-weight:700>:</span> checkStyle(),
</span></span><span style=display:flex><span>    Response<span style=color:#89dceb;font-weight:700>:</span> checkStyle(),
</span></span><span style=display:flex><span>    Example<span style=color:#89dceb;font-weight:700>:</span> checkStyle(),
</span></span><span style=display:flex><span>    Header<span style=color:#89dceb;font-weight:700>:</span> checkStyle(),
</span></span><span style=display:flex><span>    Tag<span style=color:#89dceb;font-weight:700>:</span> checkStyle(),
</span></span><span style=display:flex><span>    Schema<span style=color:#89dceb;font-weight:700>:</span> checkStyle(),
</span></span><span style=display:flex><span>    SecurityScheme<span style=color:#89dceb;font-weight:700>:</span> checkStyle(),
</span></span><span style=display:flex><span>  };  
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f38ba8>function</span> checkStyle(attribute <span style=color:#89dceb;font-weight:700>=</span> <span style=color:#a6e3a1>&#39;description&#39;</span>) {
</span></span><span style=display:flex><span>  <span style=color:#cba6f7>return</span> {
</span></span><span style=display:flex><span>    skip(node) {
</span></span><span style=display:flex><span>      <span style=color:#cba6f7>return</span> <span style=color:#cba6f7>typeof</span> node[attribute] <span style=color:#89dceb;font-weight:700>!==</span> <span style=color:#a6e3a1>&#39;string&#39;</span>;
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    enter(node, { report, location, type }) {
</span></span><span style=display:flex><span>      <span style=color:#cba6f7>const</span> loc <span style=color:#89dceb;font-weight:700>=</span> location.child([attribute]);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#cba6f7>const</span> content <span style=color:#89dceb;font-weight:700>=</span> node[attribute].trim();
</span></span><span style=display:flex><span>      <span style=color:#cba6f7>if</span> (content.length <span style=color:#89dceb;font-weight:700>===</span> <span style=color:#fab387>0</span>){
</span></span><span style=display:flex><span>        report({message<span style=color:#89dceb;font-weight:700>:</span> <span style=color:#a6e3a1>`The </span><span style=color:#a6e3a1>${</span>type.name<span style=color:#a6e3a1>}</span><span style=color:#a6e3a1> description should not be empty string.`</span>, location<span style=color:#89dceb;font-weight:700>:</span> loc});
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#cba6f7>const</span> firstChar <span style=color:#89dceb;font-weight:700>=</span> content.slice(<span style=color:#fab387>0</span>,<span style=color:#fab387>1</span>);
</span></span><span style=display:flex><span>      <span style=color:#cba6f7>if</span> (firstChar <span style=color:#89dceb;font-weight:700>!==</span> firstChar.toLocaleUpperCase()){
</span></span><span style=display:flex><span>        report({message<span style=color:#89dceb;font-weight:700>:</span> <span style=color:#a6e3a1>`The </span><span style=color:#a6e3a1>${</span>type.name<span style=color:#a6e3a1>}</span><span style=color:#a6e3a1> description should start with capital letter.`</span>, location<span style=color:#89dceb;font-weight:700>:</span> loc});
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#cba6f7>const</span> lastChar <span style=color:#89dceb;font-weight:700>=</span> content.slice(<span style=color:#89dceb;font-weight:700>-</span><span style=color:#fab387>1</span>);
</span></span><span style=display:flex><span>      <span style=color:#cba6f7>if</span> (<span style=color:#89dceb;font-weight:700>!</span>([<span style=color:#a6e3a1>&#39;.&#39;</span>, <span style=color:#a6e3a1>&#39;!&#39;</span>].includes(lastChar))) {
</span></span><span style=display:flex><span>        <span style=color:#cba6f7>const</span> suggest <span style=color:#89dceb;font-weight:700>=</span> <span style=color:#a6e3a1>`&#34;&lt;...&gt;</span><span style=color:#a6e3a1>${</span>content.slice(<span style=color:#89dceb;font-weight:700>-</span><span style=color:#fab387>10</span>)<span style=color:#a6e3a1>}</span><span style=color:#a6e3a1>.&#34;`</span>;
</span></span><span style=display:flex><span>        report({message<span style=color:#89dceb;font-weight:700>:</span> <span style=color:#a6e3a1>`The </span><span style=color:#a6e3a1>${</span>type.name<span style=color:#a6e3a1>}</span><span style=color:#a6e3a1> description should end with punctuation.`</span>, location<span style=color:#89dceb;font-weight:700>:</span>loc, suggest<span style=color:#89dceb;font-weight:700>:</span> [suggest]});
</span></span><span style=display:flex><span>      }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li><code>description</code> property can be present <a href=https://spec.openapis.org/oas/v3.0.3.html class=external-link>in several objects</a>. Thus, we target several visitors at once.</li><li><code>report</code> can also show suggestions: here we show a possible fix for the punctuation problem.</li></ul><p>Don&rsquo;t forget to enable it in <code>.redocly.yaml</code>. Here is what we have after adding the rule and fixing <em>most</em> of the errors: <a href=https://github.com/aviskase/openapi-cli-examples/tree/33e6a46e39c5237746448d8fcc9e3b8924b7d176 class=external-link>commit 33e6a46</a></p><p>But there are still two errors to fix:</p><div class=highlight><pre tabindex=0 style=color:#cdd6f4;background-color:#1e1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>validating /openapi/gates.yaml...
</span></span><span style=display:flex><span><span style=color:#89dceb;font-weight:700>[</span>1<span style=color:#89dceb;font-weight:700>]</span> openapi/components/schemas/Stargate.yaml:10:5 at <span style=color:#6c7086;font-style:italic>#/properties/state/description</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The Schema description should end with punctuation.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Did you mean: <span style=color:#a6e3a1>&#34;&lt;...&gt;, `BURIED`.&#34;</span> ?
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#fab387>8</span> |     - nullable: <span style=color:#89dceb>true</span>
</span></span><span style=display:flex><span> <span style=color:#fab387>9</span> | state:
</span></span><span style=display:flex><span><span style=color:#fab387>10</span> |   type: string
</span></span><span style=display:flex><span><span style=color:#fab387>11</span> |   nullable: <span style=color:#89dceb>true</span>
</span></span><span style=display:flex><span> … |   &lt; <span style=color:#fab387>4</span> more lines &gt;
</span></span><span style=display:flex><span><span style=color:#fab387>16</span> | environment:
</span></span><span style=display:flex><span><span style=color:#fab387>17</span> |   type: string
</span></span><span style=display:flex><span><span style=color:#fab387>18</span> |   description: Last known place where gate is situated.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Error was generated by the custom-rules/description-style rule.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#89dceb;font-weight:700>[</span>2<span style=color:#89dceb;font-weight:700>]</span> openapi/components/schemas/Stargate.yaml:18:18 at <span style=color:#6c7086;font-style:italic>#/properties/environment/description</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The Schema description should end with punctuation.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Did you mean: <span style=color:#a6e3a1>&#34;&lt;...&gt;DE_OBJECT`.&#34;</span> ?
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#fab387>16</span> | environment:
</span></span><span style=display:flex><span><span style=color:#fab387>17</span> |   type: string
</span></span><span style=display:flex><span><span style=color:#fab387>18</span> |   description: Last known place where gate is situated.
</span></span><span style=display:flex><span><span style=color:#fab387>19</span> |   nullable: <span style=color:#89dceb>true</span>
</span></span><span style=display:flex><span><span style=color:#fab387>20</span> |   x-aviskase-enum:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Error was generated by the custom-rules/description-style rule.
</span></span></code></pre></div><p>Hmm, looks confusing. Thanks to <code>suggest</code> we can at least see that something was added to the original description&mldr; Oh, right, that was our preprocessor! That&rsquo;s why I suggested to use it in the first place: if we were to modify descriptions via decorators, the rule wouldn&rsquo;t be able to catch this problem.</p><p>Finally, to make linter passing, we need to fix the preprocessor plugin code <a href=https://github.com/aviskase/openapi-cli-examples/tree/81a43321ae607fd20afd5abe4922fc86fa0fcce0 class=external-link>commit 81a4332</a>.</p><div class="callout cta"><p>Rules are cooler than preprocessors and decorators: they support nested visitors. I&rsquo;ll cover this concept in the next article. Until then, try to come up with an example where the uppercase rule in its current form might have undesired behavior.</p></div></article><nav class=article-nav aria-label="Post navigation"><span class=article-nav-old><a href=https://www.aviskase.com/articles/2021/08/16/using-openapi-cli-custom-preprocessing/ title="Using openapi-cli: custom preprocessing" aria-label="Go to older post"><span class=arrow>◁</span>older</a>
</span><span class=article-nav-middle>&nbsp;&#183;&nbsp;&#183;&nbsp;&#183;&nbsp;</span>
<span class=article-nav-new><a href=https://www.aviskase.com/articles/2023/12/15/the-navys-it-challenges/ title="The Navy’s IT challenges" aria-label="Go to newer post">newer<span class=arrow>▶</span></a></span></nav></main><footer><span>2025</span><a href=https://infosec.exchange/@aviskase rel=me aria-label="Visit my Mastodon profile"><svg role="img" height="24" viewBox="0 0 24 24" width="24"><title>Mastodon</title><desc>An icon representing the Mastodon social network</desc><path d="m20.94 14c-.28 1.41-2.44 2.96-4.97 3.26-1.31.15-2.6.3-3.97.24-2.25-.11-4-.54-4-.54v.62c.32 2.22 2.22 2.35 4.03 2.42 1.82.05 3.44-.46 3.44-.46l.08 1.65s-1.28.68-3.55.81c-1.25.07-2.81-.03-4.62-.5-3.92-1.05-4.6-5.24-4.7-9.5l-.01-3.43c0-4.34 2.83-5.61 2.83-5.61C6.95 2.3 9.41 2 11.97 2h.06c2.56.0 5.02.3 6.47.96.0.0 2.83 1.27 2.83 5.61.0.0.04 3.21-.39 5.43M18 8.91c0-1.08-.3-1.91-.85-2.56-.56-.63-1.3-.96-2.23-.96-1.06.0-1.87.41-2.42 1.23l-.5.88-.5-.88c-.56-.82-1.36-1.23-2.43-1.23-.92.0-1.66.33-2.23.96C6.29 7 6 7.83 6 8.91v5.26h2.1V9.06c0-1.06.45-1.62 1.36-1.62 1 0 1.5.65 1.5 1.93v2.79h2.07V9.37c0-1.28.5-1.93 1.51-1.93.9.0 1.35.56 1.35 1.62v5.11H18z"/></svg></a>
<a href=mailto:aviskase@gmail.com>Yuliya Bagriy</a><a href=https://www.aviskase.com/pages/i-dont-track-you/>No tracking</a></footer></body></html>