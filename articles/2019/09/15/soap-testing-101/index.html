<!doctype html><html lang=en prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# profile: http://ogp.me/ns/profile#"><head><base href=https://www.aviskase.com/articles/2019/09/15/soap-testing-101/><title>SOAP testing 101 | aviskase</title>
<meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta property="og:title" content="SOAP testing 101"><meta name=twitter:title content="SOAP testing 101"><meta property="og:description" content="Disclaimer: this is a translation of the article written 2 years ago for a corporate blog. I didn&rsquo;t do a word-for-word translation because the original article went through an editor, whose style was not that close to mine. Too watered down and &ldquo;official.&rdquo; Also, some examples don&rsquo;t make sense in English. Still, I didn&rsquo;t update it too radically. Bear in mind, at the moment of the writing I was testing SOAP services and Excel-based import/export at big government project, so most of the examples relate to that experience."><meta property="twitter:description" content="Disclaimer: this is a translation of the article written 2 years ago for a corporate blog. I didn&rsquo;t do a word-for-word translation because the original article went through an editor, whose style was not that close to mine. Too watered down and &ldquo;official.&rdquo; Also, some examples don&rsquo;t make sense in English. Still, I didn&rsquo;t update it too radically. Bear in mind, at the moment of the writing I was testing SOAP services and Excel-based import/export at big government project, so most of the examples relate to that experience."><meta name=description content="Disclaimer: this is a translation of the article written 2 years ago for a corporate blog. I didn&rsquo;t do a word-for-word translation because the original article went through an editor, whose style was not that close to mine. Too watered down and &ldquo;official.&rdquo; Also, some examples don&rsquo;t make sense in English. Still, I didn&rsquo;t update it too radically. Bear in mind, at the moment of the writing I was testing SOAP services and Excel-based import/export at big government project, so most of the examples relate to that experience."><meta property="og:url" content="https://www.aviskase.com/articles/2019/09/15/soap-testing-101/"><link rel=canonical href=https://www.aviskase.com/articles/2019/09/15/soap-testing-101/><meta property="og:type" content="article"><meta property="article:published_time" content="2019-09-15T00:00:00+00:00"><meta property="article:modified_time" content="2019-09-15T00:00:00+00:00"><meta property="og:site_name" content="aviskase"><meta property="article:author" content="https://www.aviskase.com/pages/about/"><meta name=twitter:card content="summary"><meta name=twitter:creator content="@aviskase"><link rel=me href=https://mastodon.social/@aviskase><meta name=generator content="Hugo 0.139.2"><link rel=stylesheet href="/css/main.min.955f98e6a86938f4ab69f779f0940b340a632dd3736119c2c6d199e36165b5fb.css" integrity="sha256-lV+Y5qhpOPSrafd58JQLNApjLdNzYRnCxtGZ42Fltfs="><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest></head><body class="selection:bg-blue-500 selection:text-white bg-white"><div class="min-h-screen flex flex-col"><header><nav class="bg-gradient-to-b from-blue-800 to-sky-600 relative lowercase"><div class="pb-8 pt-5 md:max-w-prose lg:max-w-screen-md flex flex-wrap items-center md:items-baseline justify-between mx-6 md:mx-auto"><a class="text-amber-300 font-bold text-2xl" href=/>aviskase</a>
<input id=nav-toggle type=checkbox class="hidden peer/nav">
<label id=show-button for=nav-toggle class="flex items-center md:hidden peer-checked/nav:hidden"><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" class="size-8 stroke-amber-300"><title>Menu Open</title><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"/></svg>
</label><label id=hide-button for=nav-toggle class="items-center hidden peer-checked/nav:flex"><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" class="size-8 stroke-amber-300"><title>Menu Close</title><path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/></svg></label><ul id=nav-menu class="font-semibold text-white hidden peer-checked/nav:block md:flex mt-4 md:mt-0 space-y-2 md:space-y-0 md:space-x-8 w-full md:w-auto"><li><a href=/>Home</a></li><li><a href=/pages/about/>About</a></li><li><a href=/pages/archive/>Archive</a></li><li><a href=/feeds/all.atom.xml>RSS</a></li></ul></div><div class="absolute bottom-0 left-0 w-full overflow-hidden leading-[0] rotate-180"><svg class="relative block h-[37px] w-[calc(198%_+_1.3px)] [&>*]:fill-white" data-name="Layer 1" viewBox="0 0 1200 120" preserveAspectRatio="none"><path d="M0 0V46.29c47.79 22.2 103.59 32.17 158 28 70.36-5.37 136.33-33.31 206.8-37.5C438.64 32.43 512.34 53.67 583 72.05c69.27 18 138.3 24.88 209.4 13.08 36.15-6 69.85-17.84 104.45-29.34C989.49 25 1113-14.29 12e2 52.47V0z" opacity=".25" class=""/><path d="M0 0V15.81C13 36.92 27.64 56.86 47.69 72.05 99.41 111.27 165 111 224.58 91.58c31.15-10.15 60.09-26.07 89.67-39.8 40.92-19 84.73-46 130.83-49.67 36.26-2.85 70.9 9.42 98.6 31.56 31.77 25.39 62.32 62 103.63 73 40.44 10.79 81.35-6.69 119.13-24.28s75.16-39 116.92-43.05c59.73-5.85 113.28 22.88 168.9 38.84 30.2 8.66 59 6.17 87.09-7.5 22.43-10.89 48-26.93 60.65-49.24V0z" opacity=".5" class=""/><path d="M0 0V5.63C149.93 59 314.09 71.32 475.83 42.57c43-7.64 84.23-20.12 127.61-26.46 59-8.63 112.48 12.24 165.56 35.4C827.93 77.22 886 95.24 951.2 90c86.53-7 172.46-45.71 248.8-84.81V0z" class=""/></svg></div></nav></header><main class="flex-1 w-full px-6 md:max-w-3xl md:mx-auto lg:max-w-4xl"><div class="prose prose-slate md:mx-auto md:prose-lg md:text-center mt-12 mb-8 md:mb-12 md:mt-16"><h1>SOAP testing 101</h1></div><div class="-mt-2 mb-8 md:mb-12"><div class="text-lg md:text-xl text-slate-500 flex flex-col md:flex-row md:justify-center"><div class="md:flex-1 md:text-end pb-1 md:pb-0 flex items-center space-x-2 md:justify-end"><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25.0 012.25-2.25h13.5A2.25 2.25.0 0121 7.5v11.25m-18 0A2.25 2.25.0 005.25 21h13.5A2.25 2.25.0 0021 18.75m-18 0v-7.5A2.25 2.25.0 015.25 9h13.5A2.25 2.25.0 0121 11.25v7.5"/></svg>
<span>15 Sep 2019</span></div><div class="hidden md:block text-center px-3">—</div><div class="md:flex-1 text-start flex items-center space-x-2"><svg fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentcolor" class="size-5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5.0A9 9 0 113 12a9 9 0 0118 0z"/></svg>
<span>9&nbsp;mins</span></div></div></div><article class="prose prose-slate md:mx-auto md:prose-lg"><p><strong>Disclaimer:</strong> this is a translation of <a href=https://quality-lab.ru/blog/soap-api-testing/ class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">the article</a> written 2 years ago for a corporate blog. I didn&rsquo;t do a word-for-word translation because the original article went through an editor, whose style was not that close to mine. Too watered down and &ldquo;official.&rdquo; Also, some examples don&rsquo;t make sense in English. Still, I didn&rsquo;t update it too radically. Bear in mind, at the moment of the writing I was testing SOAP services and Excel-based import/export at big government project, so most of the examples relate to that experience.</p><div class="callout note"><div class=callout-icon><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg></div><p>Sometimes you&rsquo;ll see a block like that. It will contain my current thoughts on the subject or comments.</p></div><hr><p>SOAP (Simple Object Access Protocol) is a standardized protocol for communication between a server and a client. Typically, it&rsquo;s used over HTTP(S), but it can operate over other application level protocols like SMTP or FTP.</p><p>Testing SOAP services is not drastically different from any other API testing, but you need to learn some specifics and use better suited tools. This article will provide a small checklist of know-hows and skills which you can use as a guide for getting started and improving your work.</p><h2 id=theory><a class="group relative" href=#theory><span class="hidden md:group-hover:inline absolute -left-5">#</span>Theory</a></h2><p>SOAP is a protocol, so you need to read about the protocol itself as well as standards and other protocols it uses and, when the time comes, about its extensions.</p><h3 id=xml><a class="group relative" href=#xml><span class="hidden md:group-hover:inline absolute -left-5">#</span>XML</a></h3><p>XML is a markup language similar to HTML. Every message sent via SOAP is a XML-document, where you can easily identify how data are structured.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#ff79c6>&lt;?xml version=&#34;1.0&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>&lt;note&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>&lt;to&gt;</span>aviskase<span style=color:#ff79c6>&lt;/to&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>&lt;from&gt;</span>universe<span style=color:#ff79c6>&lt;/from&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>&lt;heading&gt;</span>Reminder<span style=color:#ff79c6>&lt;/heading&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>&lt;body&gt;</span>Do not forget to translate the article!<span style=color:#ff79c6>&lt;/body&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>&lt;/note&gt;</span>
</span></span></code></pre></div><p>You can read about XML in details on <a href=https://www.w3schools.com/xml/default.asp class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">w3schools</a>. Pay attention to <a href=https://www.w3schools.com/xml/xml_namespaces.asp class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">namespaces</a> (name conflict resolution method for XML elements), they are used in SOAP a lot.</p><h3 id=xsd><a class="group relative" href=#xsd><span class="hidden md:group-hover:inline absolute -left-5">#</span>XSD</a></h3><p>It&rsquo;s quite handy to have standardized description of possible XML-documents and to be able to validate them. For that we use XML Schema Definition (or XSD). Two key XSD features for a tester are data type definitions and an ability to restrict possible values. For instance, element <code>body</code> from the previous example can be set as optional and with a maximum string length of 255.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#ff79c6>&lt;xs:element</span> <span style=color:#50fa7b>name=</span><span style=color:#f1fa8c>&#34;body&#34;</span> <span style=color:#50fa7b>minOccurs=</span><span style=color:#f1fa8c>&#34;0&#34;</span><span style=color:#ff79c6>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>&lt;xs:simpleType&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&lt;xs:restriction</span> <span style=color:#50fa7b>base=</span><span style=color:#f1fa8c>&#34;xs:string&#34;</span><span style=color:#ff79c6>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>&lt;xs:maxLength</span> <span style=color:#50fa7b>value=</span><span style=color:#f1fa8c>&#34;255&#34;</span><span style=color:#ff79c6>/&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&lt;/xs:restriction&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>&lt;/xs:simpleType&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>&lt;/xs:element&gt;</span>
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>XSD is awesome. The more detailed it is, the fewer dumb tests you need to do. Services can use XSD to automatically validate requests and respond with a proper error. Therefore, you don&rsquo;t need to check all those equivalence classes and boundaries (as long as XSD is detailed and correct and this server-side validation is turned on). So, the first thing you should do for SOAP testing is to test its documentation, which is XSD. That way I found tons of issues like wrong restriction or accidental Cyrillic symbols in element definitions.</p><p>More info about XSD you can get on <a href=https://www.w3schools.com/xml/schema_intro.asp class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">w3schools</a>.</p><h3 id=wsdl><a class="group relative" href=#wsdl><span class="hidden md:group-hover:inline absolute -left-5">#</span>WSDL</a></h3><p><a href=https://www.w3schools.com/xml/xml_wsdl.asp class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">WSDL</a> is used for describing web services. WSDL-documents contain information about service location and available methods (operations); every operation has descriptions of request and response parameters. Sometimes XSD can be embedded inside WSDL, but that&rsquo;s not always the case. WSDL-document is a bit of <em>magic.</em> You can generate it from classes implementing the server and then use it to generate classes for a client. So don&rsquo;t forget to check that WSDL-document is accurate and accessible to users.</p><h3 id=soap><a class="group relative" href=#soap><span class="hidden md:group-hover:inline absolute -left-5">#</span>SOAP</a></h3><p>SOAP has two versions: 1.1 or 1.2. Novice tester might not bother about differences between them. Just make sure you know which version is used in your system (and sometimes it could be both). SOAP describes message formats and details for handling particular messages. For example, some header elements can be used in the services where messages are transferred between several intermediates before reaching a destination.</p><p>Here is a request example of operation <code>checkText</code> from Yandex Speller API:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#ff79c6>&lt;soapenv:Envelope</span> <span style=color:#50fa7b>xmlns:soapenv=</span><span style=color:#f1fa8c>&#34;http://schemas.xmlsoap.org/soap/envelope/&#34;</span> <span style=color:#50fa7b>xmlns:spel=</span><span style=color:#f1fa8c>&#34;http://speller.yandex.net/services/spellservice&#34;</span><span style=color:#ff79c6>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>&lt;soapenv:Header/&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>&lt;soapenv:Body&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&lt;spel:CheckTextRequest</span> <span style=color:#50fa7b>lang=</span><span style=color:#f1fa8c>&#34;en&#34;</span> <span style=color:#ff79c6>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>&lt;spel:text&gt;</span>mistace<span style=color:#ff79c6>&lt;/spel:text&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&lt;/spel:CheckTextRequest&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>&lt;/soapenv:Body&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>&lt;/soapenv:Envelope&gt;</span>
</span></span></code></pre></div><p>And response:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#ff79c6>&lt;soap:Envelope</span> <span style=color:#50fa7b>xmlns:xsi=</span><span style=color:#f1fa8c>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span> <span style=color:#50fa7b>xmlns:xsd=</span><span style=color:#f1fa8c>&#34;http://www.w3.org/2001/XMLSchema&#34;</span> <span style=color:#50fa7b>xmlns:soap=</span><span style=color:#f1fa8c>&#34;http://schemas.xmlsoap.org/soap/envelope/&#34;</span><span style=color:#ff79c6>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>&lt;soap:Body&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&lt;CheckTextResponse</span> <span style=color:#50fa7b>xmlns=</span><span style=color:#f1fa8c>&#34;http://speller.yandex.net/services/spellservice&#34;</span><span style=color:#ff79c6>&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>&lt;SpellResult&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>&lt;error</span> <span style=color:#50fa7b>code=</span><span style=color:#f1fa8c>&#34;1&#34;</span> <span style=color:#50fa7b>pos=</span><span style=color:#f1fa8c>&#34;0&#34;</span> <span style=color:#50fa7b>row=</span><span style=color:#f1fa8c>&#34;0&#34;</span> <span style=color:#50fa7b>col=</span><span style=color:#f1fa8c>&#34;0&#34;</span> <span style=color:#50fa7b>len=</span><span style=color:#f1fa8c>&#34;7&#34;</span><span style=color:#ff79c6>&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#ff79c6>&lt;word&gt;</span>mistace<span style=color:#ff79c6>&lt;/word&gt;</span>
</span></span><span style=display:flex><span>          <span style=color:#ff79c6>&lt;s&gt;</span>mistake<span style=color:#ff79c6>&lt;/s&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#ff79c6>&lt;/error&gt;</span>
</span></span><span style=display:flex><span>      <span style=color:#ff79c6>&lt;/SpellResult&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>&lt;/CheckTextResponse&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>&lt;/soap:Body&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>&lt;/soap:Envelope&gt;</span>
</span></span></code></pre></div><p>Read details about SOAP on <a href=https://www.w3schools.com/xml/xml_soap.asp class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">w3schools</a>.</p><h3 id=soap-extensions><a class="group relative" href=#soap-extensions><span class="hidden md:group-hover:inline absolute -left-5">#</span>SOAP extensions</a></h3><p>Occasionally you&rsquo;ll bump into SOAP extensions with names like <code>WS-</code>. One of the most common is <a href=https://en.wikipedia.org/wiki/WS-Security class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">WS-Security</a> which is used for encryption and digital signatures. Often it&rsquo;s combined with WS-Policy for managing service access rights.</p><p>Example of WS-Security usage:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#ff79c6>&lt;wsse:UsernameToken</span> <span style=color:#50fa7b>wsu:Id=</span><span style=color:#f1fa8c>&#34;uuid_faf0159a-6b13-4139-a6da-cb7b4100c10c&#34;</span><span style=color:#ff79c6>&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>&lt;wsse:Username&gt;</span>Alice<span style=color:#ff79c6>&lt;/wsse:Username&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>&lt;wsse:Password</span> <span style=color:#50fa7b>Type=</span><span style=color:#f1fa8c>&#34;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest&#34;</span><span style=color:#ff79c6>&gt;</span>6S3P2EWNP3lQf+9VC3emNoT57oQ=<span style=color:#ff79c6>&lt;/wsse:Password&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>&lt;wsse:Nonce</span> <span style=color:#50fa7b>EncodingType=</span><span style=color:#f1fa8c>&#34;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary&#34;</span><span style=color:#ff79c6>&gt;</span>YF6j8V/CAqi+1nRsGLRbuZhi<span style=color:#ff79c6>&lt;/wsse:Nonce&gt;</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>&lt;wsu:Created&gt;</span>2008-04-28T10:02:11Z<span style=color:#ff79c6>&lt;/wsu:Created&gt;</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>&lt;/wsse:UsernameToken&gt;</span>
</span></span></code></pre></div><p>Extension can be complex and intimidating. You can skip learning about them in details if your service does not have them.</p><h2 id=tools><a class="group relative" href=#tools><span class="hidden md:group-hover:inline absolute -left-5">#</span>Tools</a></h2><p>SOAP is a serious business: all this theory and standards. And XMLs tend to be <em>huge</em>. You <em>can,</em> but you <em>don&rsquo;t want</em> to use tools like notepad and cURL for daily work. But don&rsquo;t worry, there are tools to make life easier with SOAP.</p><h3 id=xmlxsd-editors><a class="group relative" href=#xmlxsd-editors><span class="hidden md:group-hover:inline absolute -left-5">#</span>XML&amp;XSD editors</a></h3><p>As I said before, you need to start testing with documentation. For that you can use special editors. Two most common are <a href=https://www.oxygenxml.com/ class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">Oxygen</a> (cross-platform) and <a href=https://www.altova.com/ class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">Altova</a> (Windows-only); both are not free. These are feature-heavy applications used by analysts.</p><p>I routinely use three features: XSD visualization, XML generation, and XML validation.</p><p><strong>XSD visualization</strong> is helpful to easily spot schema elements, attributes, and restrictions. For example, <code>CheckTextRequest</code> has a required <code>text</code> element, whereas all three attributes are optional. In addition, attribute <code>option</code> has a default value <code>0</code>.</p><p><figure><picture><source srcset=https://www.aviskase.com/articles/2019/09/15/soap-testing-101/oxygen_hu10729633755816028478.webp type=image/webp><img class="mx-auto rounded" src=https://www.aviskase.com/articles/2019/09/15/soap-testing-101/oxygen.png alt="XSD visualization in Oxygen" defer></picture></figure></p><p>Visualization is handy when there are lots of types and restrictions. If you need only this feature and you don&rsquo;t want to buy apps, you can check
<a href=http://stackoverflow.com/questions/2486758/how-to-visualize-an-xml-schema class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">free alternatives</a> like JDeveloper.</p><p>You can use <strong>XML generation</strong> to quickly create examples of messages based on supplied XSD. I use is for exploration and experimentation on possible XMLs and checking how restrictions are applied.</p><p>After generating messages, you can perform <strong>XML validation</strong> on them. Together these two features allow you to find issues with a service even when it&rsquo;s not yet implemented.</p><h3 id=testing-with-soapui><a class="group relative" href=#testing-with-soapui><span class="hidden md:group-hover:inline absolute -left-5">#</span>Testing with SoapUI</a></h3><p>Testing SOAP services almost always means using <a href=https://www.soapui.org/ class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">SoapUI</a>. You can read about it in <a href=https://www.guru99.com/webservice-testing-beginner-guide.html class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">this tutorial</a> or <a href=https://www.soapui.org/getting-started.html class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">the official documentation</a>.</p><p>I&rsquo;ve come up with eight possible levels of SoapUI mastery.</p><h4 id=level-1-sending-requests><a class="group relative" href=#level-1-sending-requests><span class="hidden md:group-hover:inline absolute -left-5">#</span>Level 1: sending requests</a></h4><p>Learn how to create a project based on WSDL. SoapUI can generate all requests for you; all you need to do is to check their correctness and click a &ldquo;Send&rdquo; button. After getting used to send valid requests you&rsquo;ll need to start creating invalid ones to get expected error messages.</p><h4 id=level-2-using-test-suites-and-test-cases><a class="group relative" href=#level-2-using-test-suites-and-test-cases><span class="hidden md:group-hover:inline absolute -left-5">#</span>Level 2: using &ldquo;Test suites&rdquo; and &ldquo;Test cases&rdquo;</a></h4><p>Start writing mini-autotests. Tests suites and test cases allow creating automation scenarios, prepare test data, and automatically assert responses. At first you can use them simply for organization. For example, if you filed an issue, you&rsquo;d want to quickly check its fix and for that you can have a separate test suite with requests specific to each issue.</p><h4 id=level-3-writing-assertions><a class="group relative" href=#level-3-writing-assertions><span class="hidden md:group-hover:inline absolute -left-5">#</span>Level 3: writing assertions</a></h4><p>After using cases for some time, you&rsquo;ll want to make them automatically asserted to mark valid responses as green and invalid ones as red. SoapUI has lots of assertion types, but the simplest ones are <code>Contains</code> and <code>Not Contains</code> which you can use to check existence of some string in the response. These assertions also support regular expressions.</p><h4 id=level-4-using-xpath-andor-xquery-in-assertions><a class="group relative" href=#level-4-using-xpath-andor-xquery-in-assertions><span class="hidden md:group-hover:inline absolute -left-5">#</span>Level 4: using XPath and/or XQuery in assertions</a></h4><p><a href=https://www.w3schools.com/xml/xpath_intro.asp class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">XPath</a> is a familiar thing for those who work on UI automation with Selenium. In short, XPath is used to search for elements inside XML-document. <a href=https://www.w3schools.com/xml/xquery_intro.asp class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">XQuery</a> is a similar technology which can use XPath &ldquo;inside&rdquo;; this language is way more powerful and SQL-like. Both can be used in assertions and will make checks more robust and precise.</p><h4 id=level-5-writing-complex-checks-with-special-steps><a class="group relative" href=#level-5-writing-complex-checks-with-special-steps><span class="hidden md:group-hover:inline absolute -left-5">#</span>Level 5: writing complex checks with special steps</a></h4><p>Test cases can contain several requests and other special steps, which can form a user flow (for example, a scenario &ldquo;create entity → export entity&rdquo;). Some of those steps are:</p><ul><li><code>Properties</code> and <code>Property Transfer</code> (help to reuse data and transfer it between requests)</li><li><code>JDBC Request</code> (used for getting data from databases)</li><li><code>Conditional Goto</code> (allows to create conditions and loops)</li><li><code>Run TestCase</code> (help to reuse common test cases)</li></ul><h4 id=level-6-using-groovy-scripts><a class="group relative" href=#level-6-using-groovy-scripts><span class="hidden md:group-hover:inline absolute -left-5">#</span>Level 6: using Groovy scripts</a></h4><p>SoapUI supports writing scripts in Groovy language. The simplest idea is to generate data embedding Groovy via <code>${=}</code> inside a request body. For example:</p><ul><li>Insert current date and time: <code>${=new Date().format("yyyy-MM-dd'T'HH:mm:ss")}</code></li><li>Insert a random GUID: <code>${=java.util.UUID.randomUUID()}</code></li></ul><p>More complex scripts can be used in separate steps and assertions. At some point you&rsquo;ll notice you tend to write everything inside script step instead of steps from level 5.</p><h4 id=level-7-using-mockservices><a class="group relative" href=#level-7-using-mockservices><span class="hidden md:group-hover:inline absolute -left-5">#</span>Level 7: using MockServices</a></h4><p>SoapUI can generate mock objects based on WSDL. It&rsquo;s a crude service simulation which you can use to write and debug test cases before they are actually available for testing. Also, you can use them in place of temporarily down services.</p><h4 id=level-8-god-mode><a class="group relative" href=#level-8-god-mode><span class="hidden md:group-hover:inline absolute -left-5">#</span>Level 8: god-mode</a></h4><p>You recognize differences between free and pro versions of SoapUI. You use SoapUI as a library from code. You use plugins and run test cases via CLI and/or CI. Your tests cases are elegant and easy to support. You know all the angles! I envy you.</p><div class="callout note"><div class=callout-icon><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg></div><p>Or not. Presently I don&rsquo;t use any GUI tools for API testing except for exploratory sessions.</p></div><h3 id=testing-with-code><a class="group relative" href=#testing-with-code><span class="hidden md:group-hover:inline absolute -left-5">#</span>Testing with code</a></h3><p>At some point you&rsquo;ll have a feeling that it&rsquo;s more efficient to use programming languages for writing tests. That&rsquo;s fine. SoapUI is a GUI application and has its drawbacks; some of them are resolved with pro version, while others require huge and brittle scripting hacks.</p><p>There are tons of libraries for working with SOAP in any language. For example, there are <a href=http://axis.apache.org/axis2/java/core/ class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">Axis2</a> for Java (good examples are in the articles at <a href=https://www.ibm.com/developerworks/webservices/tutorials/ws-understand-web-services1/ws-understand-web-services1.html class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">IBM developerWorks</a>), <a href=https://bitbucket.org/jurko/suds/ class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">suds</a> or <a href=http://docs.python-zeep.org/en/latest/ class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">zeep</a> for Python, or <a href=https://github.com/jwagenleitner/groovy-wslite class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">groovy-wslite</a> for Groovy.</p><p>Here is an example of request made to YandexSpeller API using groovy-wslite:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-groovy data-lang=groovy><span style=display:flex><span><span style=color:#ff79c6>import</span> wslite.soap.*
</span></span><span style=display:flex><span><span style=color:#8be9fd>def</span> client <span style=color:#ff79c6>=</span> <span style=color:#ff79c6>new</span> SOAPClient<span style=color:#ff79c6>(</span><span style=color:#f1fa8c>&#39;http://speller.yandex.net/services/spellservice?WSDL&#39;</span><span style=color:#ff79c6>)</span>
</span></span><span style=display:flex><span><span style=color:#8be9fd>def</span> response <span style=color:#ff79c6>=</span> client<span style=color:#ff79c6>.</span><span style=color:#50fa7b>send</span><span style=color:#ff79c6>(</span><span style=color:#8be9fd;font-style:italic>SOAPAction:</span> <span style=color:#f1fa8c>&#39;http://speller.yandex.net/services/spellservice/checkText&#39;</span><span style=color:#ff79c6>)</span> <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span>  body <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span>    CheckTextRequest<span style=color:#ff79c6>(</span><span style=color:#f1fa8c>&#39;lang&#39;</span><span style=color:#ff79c6>:</span> <span style=color:#f1fa8c>&#39;en&#39;</span><span style=color:#ff79c6>,</span> <span style=color:#f1fa8c>&#39;xmlns&#39;</span><span style=color:#ff79c6>:</span><span style=color:#f1fa8c>&#39;http://speller.yandex.net/services/spellservice&#39;</span><span style=color:#ff79c6>)</span> <span style=color:#ff79c6>{</span>
</span></span><span style=display:flex><span>      text<span style=color:#ff79c6>(</span><span style=color:#f1fa8c>&#39;mistace&#39;</span><span style=color:#ff79c6>)</span>
</span></span><span style=display:flex><span>    <span style=color:#ff79c6>}</span>
</span></span><span style=display:flex><span>  <span style=color:#ff79c6>}</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>}</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>assert</span> <span style=color:#f1fa8c>&#39;mistake&#39;</span> <span style=color:#ff79c6>==</span> response<span style=color:#ff79c6>.</span><span style=color:#50fa7b>CheckTextResponse</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>SpellResult</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>error</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>s</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>text</span><span style=color:#ff79c6>()</span>
</span></span><span style=display:flex><span><span style=color:#ff79c6>assert</span> <span style=color:#f1fa8c>&#39;1&#39;</span> <span style=color:#ff79c6>==</span> response<span style=color:#ff79c6>.</span><span style=color:#50fa7b>CheckTextResponse</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>SpellResult</span><span style=color:#ff79c6>.</span><span style=color:#50fa7b>error</span><span style=color:#ff79c6>.</span>@code.text<span style=color:#ff79c6>()</span>
</span></span></code></pre></div><p>As far as I know there are no high-level test frameworks for SOAP (similar to Rest-assured), but there is an interesting framework called <a href=https://github.com/intuit/karate class="bg-gradient-to-b from-blue-500 to-blue-500 bg-left-bottom bg-no-repeat bg-[length:100%_0.1rem] transition-[background] duration-300 hover:bg-gradient-to-b hover:from-amber-300 hover:to-amber-300 hover:bg-[length:100%_100%]">karate</a> where you can describe test cases for SOAP and REST in Cucumber / Gherkin style.</p><div class="callout note"><div class=callout-icon><svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg></div><p>I don&rsquo;t do any Groovy programming anymore, so no idea how groovy-wslite fares. In fact, I don&rsquo;t do SOAP testing now, so my knowledge about libraries can be outdated.</p><p>Plus, I avoid anything cucumber-ish =)</p></div><hr><p>I doubt anyone will go and test SOAP services in their free time just of curiosity. It&rsquo;s a heavy protocol used in serious corporate systems. But its heaviness is a good news for testing: all technologies are standardized and there is a vast ecosystem around it.</p><p>So, here is a promised checklist. If you are only starting to test SOAP services, you need to learn and be able to use:</p><ul><li>XML</li><li>XSD</li><li>WSDL</li><li>SOAP</li><li>XML&amp;XSD editors for XSD visualization</li><li>SoapUI level 1</li></ul><p>Basically, just standards and being able to send requests, nothing more. That&rsquo;s it. Of course, you&rsquo;ll unavoidably learn more with time, but don&rsquo;t deep dive right away or your head will explode =)</p></article><div class="mx-auto max-w-max mt-16 md:text-lg"><a class="relative hover:text-blue-500 focus:text-blue-500 transition-colors duration-300" href=https://www.aviskase.com/articles/2019/09/08/using-google-apps-scripts-for-productivity-improvements/ title="Using Google Apps scripts for productivity improvements"><svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="relative inline text-blue-500 text-xl md:text-2xl mx-2"><path d="M11 17l-5-5 5-5m7 10-5-5 5-5"/></svg>older</a>
<span class="text-blue-500 font-bold md:mx-2">&nbsp; &#183; &nbsp; &#183; &nbsp; &#183; &nbsp;</span>
<a class="relative hover:text-blue-500 focus:text-blue-500 transition-colors duration-300" href=https://www.aviskase.com/articles/2019/09/24/new-domain/ title="New domain">newer<svg width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="relative inline text-blue-500 text-xl md:text-2xl mx-2"><path d="M13 17l5-5-5-5M6 17l5-5-5-5"/></svg></a></div></main><footer class="justify-center flex w-full mt-8 md:mt-10 pt-4 pb-3 bg-amber-300 text-sm md:text-base"><a class="border-b-2 border-transparent hover:border-blue-500" href=mailto:aviskase@gmail.com>Yuliya Bagriy</a><span>&nbsp;&#183;&nbsp;2024&nbsp;&#183;&nbsp;</span><a class="border-b-2 border-transparent hover:border-blue-500" href=https://www.aviskase.com/pages/i-dont-track-you/>No tracking</a></footer></div></body></html>