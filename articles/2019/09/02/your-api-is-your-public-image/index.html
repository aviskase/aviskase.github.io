<!DOCTYPE html>
<html lang="en">

    <head>

        <title>Your API Is Your Public Image | aviskase</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta charset="utf-8" />


    <link rel="canonical" href="https://www.aviskase.com/articles/2019/09/02/your-api-is-your-public-image/"/>

    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:site" content="@aviskase" />

    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://www.aviskase.com/articles/2019/09/02/your-api-is-your-public-image/" />
    <meta property="og:title" content="Your API Is Your Public Image" />
    <meta property="og:description" content="Disclaimer: this is a translation of the article written 2 years ago for a corporate blog. I didn’t do a word-for-word translation because the original article went through an editor, whose style was not that close to mine. Too watered down and “official.” Also, some examples don’t make …" />
    <meta property="og:image" content="https://www.aviskase.com/images/og_default.png" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:width" content="1200" />
    <meta property="article:author" content="https://www.aviskase.com/pages/about/" />
    <meta property="article:published_time" content="2019-09-02 00:00:00-04:00" />


    <meta name="category" content="Testing" />
    <meta property="article:section" content="Testing" />

    <meta name="keywords" content="api" />
    <meta property="article:tag" content="api" />



<meta name="description" content="Disclaimer: this is a translation of the article written 2 years ago for a corporate blog. I didn’t do a word-for-word translation because the original article went through an editor, whose style was not that close to mine. Too watered down and “official.” Also, some examples don’t make …"/>

        <link href="https://www.aviskase.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="aviskase Full Atom Feed" />

        <link rel="icon" href="https://www.aviskase.com/theme/favicon.ico">
        <link rel="stylesheet" href="//code.cdn.mozilla.net/fonts/fira.css">
        <link rel="stylesheet" type="text/css" href="https://www.aviskase.com/theme/css/fontello.css" />
        <link rel="stylesheet" type="text/css" href="https://www.aviskase.com/theme/style.css" />
        <link rel="stylesheet" type="text/css" href="https://www.aviskase.com/theme/solarized-light.css" />

<script type="text/javascript">
    var disqus_identifier = "articles/2019/09/02/your-api-is-your-public-image/";
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://aviskase.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />
  <script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script>
  <script>
  if(!(window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1")) {
    window.addEventListener("load", function(){
      function enableCookies() {
          window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({
              'pageType': 'article',
              'articleCategory': 'Testing',
              'articleTags': ["api"]
            });

          (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-W75RR8K');
      }

      function handleStatus(status) {
        if ('allow' === status) {
          enableCookies();
        }
      }
      window.cookieconsent.hasTransition = false;

      window.cookieconsent.initialise({
        palette: {
          popup: {background: "#000000"},
          button: {background: 'transparent', border: "#d47500"},
          highlight: {background: 'transparent', border: '#008000'}
        },
        type: "opt-in",
        content: {
          message: "This site uses cookies for analytics.",
          href: 'https://www.aviskase.com/pages/privacy-and-cookies',
        },
        onInitialise: handleStatus,
        onStatusChange: handleStatus
      })
    });
  }
  </script>    </head>

<body id="index" class="home">
    <nav>
        <ul>
          <li><a class="site-title" href="https://www.aviskase.com/">aviskase</a></li>
          <li><a class="site-title" href="https://www.aviskase.com/">Blog</a></li>

          <li><a href="https://www.aviskase.com/pages/about">About</a></li>
          <li><a href="https://www.aviskase.com/meta">Meta</a></li>
          <li><a href="https://www.aviskase.com/feeds/all.atom.xml">RSS</a></li>

        </ul>

    </nav>

    <main>
<article>

    <h1>Your <span class="caps">API</span> Is Your Public&nbsp;Image</h1>

    <div class='article-meta'>

        <time class="published">2 Sep 2019</time>


        <span class="readtime">
            <span class='icon-clock' aria-hidden="true"></span>
            8&nbsp;mins
        </span>

        <span class="article-category">
            <span class="icon-folder-open" aria-hidden="true"></span>
            <a href="https://www.aviskase.com/category/testing/">Testing</a>
        </span>

        <span class="article-tags">
            <span class='icon-tags' aria-hidden="true"></span>
                <a href="https://www.aviskase.com/tag/api/">api</a>        </span>


        <span class="article-comments">
            <span class='icon-chat-empty' aria-hidden="true"></span>
            <a href="https://www.aviskase.com/articles/2019/09/02/your-api-is-your-public-image/#disqus_thread" data-disqus-identifier="">0 comments</a>
        </span>

    </div>


    <p><strong>Disclaimer:</strong> this is a translation of <a class="external" href="https://quality-lab.ru/blog/your-api-is-your-public-face/">the article</a> written 2 years ago for a corporate blog. I didn&rsquo;t do a word-for-word translation because the original article went through an editor, whose style was not that close to mine. Too watered down and &ldquo;official.&rdquo; Also, some examples don&rsquo;t make sense in English. Still, I didn&rsquo;t update it too radically. Bear in mind, at the moment of the writing I was testing <span class="caps">SOAP</span> services and Excel-based import/export at big government project, so most of the examples relate to that&nbsp;experience.  </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Sometimes you&rsquo;ll see a block like that. It will contain my current thoughts on the subject or&nbsp;comments.</p>
</div>
<hr>
<p>First, what is <span class="caps">API</span>?</p>
<p><strong><span class="caps">API</span> (Application Programming Interface)</strong> is an interface which helps apps to communicate with each other. Just as a human interacts with apps via buttons and dialogs (user interface, <span class="caps">UI</span>), so apps interact via&nbsp;APIs.</p>
<h2>Types of <span class="caps">API</span></h2>
<p>One way to define <span class="caps">API</span> types is whether it&rsquo;s public or private <span class="caps">API</span>. <strong>Private</strong> <span class="caps">API</span> is used for interactions inside your system, for&nbsp;example:</p>
<ul>
<li>sync between mobile or desktop app and a&nbsp;server</li>
<li>app uses server&rsquo;s computational resources (e.g., an image stylization app sends image and selected style to the server, where stylization will be&nbsp;done)</li>
<li>communications between a web app and&nbsp;server</li>
<li>communications between&nbsp;micro-services</li>
</ul>
<p>Primary risks for private APIs are functional and performance problems. Here, customers can only speculate why app works somehow&nbsp;wrong-y.</p>
<p>With <strong>public</strong> <span class="caps">API</span> communication endpoints go beyond your system boundaries. Either you use someone&rsquo;s <span class="caps">API</span> (social networks, maps, etc.) or you provide your <span class="caps">API</span> to external&nbsp;developers.</p>
<p>Let&rsquo;s talk about public APIs a bit more. For some companies providing APIs is the core business (e.g., payment processing: Stripe, Rebilly), for others it&rsquo;s just a nice to have addition to the main services. Whatever the case, public APIs open a perspective into how your internal development process works. And you won&rsquo;t be able to hide behind fancy <span class="caps">UI</span> and eloquent support&nbsp;team.</p>
<p>If you publish public <span class="caps">API</span> with bad documentation, versioning mess, and tons of functional issues, make no mistake, external developer can (and maybe should!) assume that all your system is developed is such manner. Will they build their services around <em>such</em> system and attract new users? Nope. Will they persuade their bosses and friends against using and/or buying your product? Probably. Don&rsquo;t forget that people who are not so tech-y value developers&rsquo; opinions a lot. And of course, those developers could also give your a bad reputation by complaining on social networks or forums. Therefore, before publishing even the tiniest <span class="caps">API</span>, you should think about its&nbsp;quality.</p>
<h2>Four Ways to Fuck up a Public <span class="caps">API</span></h2>
<p>There are different techniques for assessing <span class="caps">API</span> quality (for example, <a class="external" href="http://apiux.com/2013/05/29/api-hierarchy-needs/">hierarchy of needs</a>). Let&rsquo;s talk about four main ways to be an awful <span class="caps">API</span>:</p>
<h3>Broken&nbsp;Functionality</h3>
<p>Sounds banal, but a service should work. And it should provide functionality it was created for. On one of my projects, there was an embarrassing situation with an export. We tested <span class="caps">API</span> with different objects under various conditions, but only with the small number of objects. All was fine until we found a bug on export with lots of data. The thing is that the key purpose for this service was to provide an ability to do massive exports, therefore, the service didn&rsquo;t fulfill its main reason for&nbsp;existence.</p>
<p>You need to check available operations in context of other operations. For example, we released an import operation for objects A. It required an id of object B in the request body, but import and export of B was unreleased at the moment. As the result, it was impossible to do import A at&nbsp;all.</p>
<p>Other possible problem: do you consider a region where <span class="caps">API</span> will be used? Obviously, support for Cyrillic is not that important for purely <span class="caps">US</span> oriented product. But if you work globally, do not forget to check non-<span class="caps">ASCII</span> characters! Even though Unicode seems to be default, I did find bugs like that one: a user uploaded a file with the name <code>Документ_1.pdf</code>, yet it was saved as <code>_1.pdf</code>.</p>
<p>One more example. We had a service for chunked file download which &ldquo;ate&rdquo; last byte of the last chunk. It was highly critical problem because this service was a part of the system where these files were used as supporting documents for legal&nbsp;agreements.</p>
<h3>Unreliability</h3>
<p>Service is reliable if it works when it&rsquo;s expected to be working and provides timely feedback in case of any&nbsp;problems. </p>
<p>Worst performance problems I encountered were with export services. One of them was working perfectly fine until the biggest organization in the system started using it and crashing application servers. Hot-fixes after hot-fixes, optimizations, new version; nothing helped. And we couldn&rsquo;t disable that service or completely rewrite its public <span class="caps">API</span> because of contractual&nbsp;obligations.</p>
<p>So, what if your service experiences problems? How external users will learn about it? Will there be any alert about temporary issues or downtimes? Any resolution time frames? Usually, there is a special web page with answers to these question, with a table like&nbsp;this:</p>
<p><img alt="API status table" src="https://www.aviskase.com/articles/2019/09/02/your-api-is-your-public-image/api_status.png"></p>
<p>And beware, this page should not on the same infrastructure as the services it&rsquo;s showing! It would be quite embarrassing if <a class="external" href="https://twitter.com/awscloud/status/836656664635846656">it goes down at the same time your services go down</a>.</p>
<h3>Crappy&nbsp;Usability</h3>
<p>When we hear the word &ldquo;usability&rdquo;, we usually think about <span class="caps">GUI</span>: buttons and dialogs. I think <span class="caps">GUI</span> usability is somewhat overrated: even in the ugliest app you can guess your way by trial and error. With <span class="caps">API</span> it won&rsquo;t&nbsp;work:</p>
<ul>
<li>No public documentation? Users will never even know that <span class="caps">API</span>&nbsp;exists.</li>
<li>Public documentation is there, but there is no info about actual endpoints? Users won&rsquo;t be able to call <span class="caps">API</span>.</li>
<li>Public documentation is there, but written in such manner that without knowing internal docs you can&rsquo;t understand a thing? Again, users won&rsquo;t be happy at&nbsp;all.</li>
<li>Spelling mistakes? Not that critical if in text, but can be quite awful in schemes. Real support&nbsp;ticket:</li>
</ul>
<blockquote>
<p>Your developers drink too much and it impairs their accuracy. There is an epic fail in a scheme with the name of the element <code>Pressure</code>: the first letter is a Cyrillic character and it breaks all client code&nbsp;generation.</p>
</blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Cyrillic <code>Р/р</code>  (pronounced like &ldquo;r&rdquo;) looks exactly like Latin <code>P/p</code>. </p>
</div>
<ul>
<li>Service works fine, but error messages are not that informative? Users won&rsquo;t understand how to fix an error (and probably will open a support ticket, so you&rsquo;ll needlessly spend time resolving non-existing&nbsp;issue).</li>
</ul>
<p><img alt="Unhelpful error message" src="https://www.aviskase.com/articles/2019/09/02/your-api-is-your-public-image/bad_error_message.png"></p>
<ul>
<li>
<p>You have <span class="caps">UI</span> and <span class="caps">API</span>? Don&rsquo;t forget to check they correspond to each other. The most common problem is when constraints on <span class="caps">UI</span> fields don&rsquo;t match same fields in <span class="caps">API</span>: for example, <span class="caps">UI</span> can accept maximum 50 characters for the name and <span class="caps">API</span> only 20, which leads to errors when trying to export anything created on <span class="caps">UI</span>.</p>
</li>
<li>
<p>Don&rsquo;t forget about versionning (in <span class="caps">API</span> and its documentation). The older your services are, more careful you should be with incompatible changes. Documentation should always be up-to-date: sounds obvious, but we had a big fuck up when someone accidentally published documentation for upcoming <span class="caps">API</span> version and external developers started trying to use these new features, didn&rsquo;t find them, and bombed support team with &ldquo;nothing works again&rdquo;&nbsp;tickets.</p>
</li>
</ul>
<h3>Security&nbsp;Holes</h3>
<p>When you publish <span class="caps">API</span> you also increase a potential attack surface for hackers. First of all, think about authorization and authentication processes. Typically, there are special access tokens for <span class="caps">API</span> users. Maybe simple developers&rsquo; tokens will be enough for your case, maybe you&rsquo;ll need to use flows like OAuth. In some cases you should sign requests and&nbsp;responses.</p>
<p>Oftentimes there are several APIs: for example, test <span class="caps">API</span> (for internal developers and testers) and open public <span class="caps">API</span>. You should make sure that test <span class="caps">API</span> is secured enough. There are known cases when web crawlers accidentally found test endpoints and happily showed them in search&nbsp;results.</p>
<p>If you provide access to test <span class="caps">API</span> to external developers, you&rsquo;d better treat this <span class="caps">API</span> as high security risk. One time I found a stackoverflow question with code snippet containing authorization keys and proper endpoints for our&nbsp;system.</p>
<p>One open source project I used had a different issue. Test <span class="caps">API</span> was used by developers to help with testing: add money to the account, change account status to premium, etc. It was hidden and secure&hellip; Until someone released a version with these APIs enabled in production. That&rsquo;s bad&nbsp;:)</p>
<h2>Conclusion</h2>
<p>After reading all of these, you&rsquo;d think that public APIs are too risky, challenging, and expensive. Perhaps, it&rsquo;s better not to provide it? Maybe. But global connectivity is a trend. Stable and useful <span class="caps">API</span> can facilitate your profits: it can increase your user base via external apps or advertise your workplace to professionals. It&rsquo;s a demanding work, but it pays&nbsp;off.</p>
<p>And even if you don&rsquo;t and won&rsquo;t have public <span class="caps">API</span>, think about your private ones. We should care about your own developers, shouldn&rsquo;t&nbsp;we? </p>



    <div class="page-navigation code">
        <a class="prev" href="https://www.aviskase.com/articles/2019/08/26/revision-testers-in-this-world/" title="Revision: Testers in This World">&larr; older</a>

        <span>&nbsp; &middot; &nbsp; &middot; &nbsp; &middot; &nbsp;</span>

        <a class="next" href="https://www.aviskase.com/articles/2019/09/04/stereotype-rant/" title="Stereotype Rant">newer &rarr;</a>
    </div>

<div id="disqus_thread"></div>
</article>
    </main>

    <footer>
        <a href="mailto:aviskase@gmail.com">Yuliya Bagriy</a><span> &middot; 2019 &middot; </span><a href="https://www.aviskase.com/pages/privacy-and-cookies">Privacy</a>
    </footer>

    <script id="dsq-count-scr" src="//aviskase.disqus.com/count.js" async></script>

</body>
</html>